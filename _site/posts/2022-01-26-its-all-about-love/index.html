<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>KG's Learning Blog: It's all about love</title>

<meta property="description" itemprop="description" content="An exploration of Christian song over 30 years period using Spotify and Genius lyrics"/>

<link rel="canonical" href="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-01-26"/>
<meta property="article:created" itemprop="dateCreated" content="2022-01-26"/>
<meta name="article:author" content="Kevin Gunawan Albindo"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="KG&#39;s Learning Blog: It&#39;s all about love"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="An exploration of Christian song over 30 years period using Spotify and Genius lyrics"/>
<meta property="og:url" content="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"/>
<meta property="og:image" content="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/preview.jpg"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="KG&#39;s Learning Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="KG&#39;s Learning Blog: It&#39;s all about love"/>
<meta property="twitter:description" content="An exploration of Christian song over 30 years period using Spotify and Genius lyrics"/>
<meta property="twitter:url" content="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"/>
<meta property="twitter:image" content="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/preview.jpg"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="KG&#39;s Learning Blog: It&#39;s all about love"/>
<meta name="citation_fulltext_html_url" content="https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"/>
<meta name="citation_online_date" content="2022/01/26"/>
<meta name="citation_publication_date" content="2022/01/26"/>
<meta name="citation_author" content="Kevin Gunawan Albindo"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","preview","author","date","output","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["It's all about love"]},{"type":"character","attributes":{},"value":["An exploration of Christian song over 30 years period using Spotify and Genius lyrics"]},{"type":"character","attributes":{},"value":["preview.jpg"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Kevin Gunawan Albindo"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/kgalbindo"]}]}]},{"type":"character","attributes":{},"value":["01-26-2022"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"]},{"type":"character","attributes":{},"value":["https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["its-all-about-love_files/anchor-4.2.2/anchor.min.js","its-all-about-love_files/bowser-1.9.3/bowser.min.js","its-all-about-love_files/distill-2.2.21/template.v2.js","its-all-about-love_files/header-attrs-2.14/header-attrs.js","its-all-about-love_files/header-attrs-2.7/header-attrs.js","its-all-about-love_files/jquery-1.11.3/jquery.min.js","its-all-about-love_files/jquery-3.6.0/jquery-3.6.0.js","its-all-about-love_files/jquery-3.6.0/jquery-3.6.0.min.js","its-all-about-love_files/jquery-3.6.0/jquery-3.6.0.min.map","its-all-about-love_files/popper-2.6.0/popper.min.js","its-all-about-love_files/tippy-6.2.7/tippy-bundle.umd.min.js","its-all-about-love_files/tippy-6.2.7/tippy-light-border.css","its-all-about-love_files/tippy-6.2.7/tippy.css","its-all-about-love_files/tippy-6.2.7/tippy.umd.min.js","its-all-about-love_files/webcomponents-2.0.0/webcomponents.js","output_40_1.png","output_47_1.png","output_56_1.png","output_56_11.png","output_56_13.png","output_56_15.png","output_56_17.png","output_56_19.png","output_56_21.png","output_56_23.png","output_56_25.png","output_56_27.png","output_56_29.png","output_56_3.png","output_56_31.png","output_56_33.png","output_56_35.png","output_56_37.png","output_56_39.png","output_56_41.png","output_56_43.png","output_56_45.png","output_56_47.png","output_56_49.png","output_56_5.png","output_56_51.png","output_56_53.png","output_56_55.png","output_56_57.png","output_56_59.png","output_56_61.png","output_56_63.png","output_56_7.png","output_56_9.png","preview.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-196546500-1"></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-196546500-1');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"It's all about love","description":"An exploration of Christian song over 30 years period using Spotify and Genius lyrics","authors":[{"author":"Kevin Gunawan Albindo","authorURL":"https://www.linkedin.com/in/kgalbindo","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-01-26T00:00:00.000+08:00","citationText":"Albindo, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">KG's Learning Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="https://ourshinypet.netlify.app/">Visual Analytics Project</a>
<a href="https://public.tableau.com/app/profile/kevin.gunawan.albindo">Tableau</a>
<a href="../../about.html">About</a>
<a href="https://www.linkedin.com/in/kgalbindo/">
<i class="fa fa-linkedin" aria-hidden="true"></i>
</a>
<a href="https://github.com/kgalbindo">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>It’s all about love</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>An exploration of Christian song over 30 years period using
Spotify and Genius lyrics</p></p>
</div>

<div class="d-byline">
  Kevin Gunawan Albindo <a href="https://www.linkedin.com/in/kgalbindo"
class="uri">https://www.linkedin.com/in/kgalbindo</a> 
  
<br/>01-26-2022
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#import-libraries-and-setup-necessary-api">1. Import
libraries and setup necessary API</a></li>
<li><a href="#collect-songs-from-spotify">2. Collect songs from
Spotify</a></li>
<li><a href="#get-song-lyrics-from-geniuslyrics">3. Get song lyrics from
GeniusLyrics</a></li>
<li><a href="#analyse-lyrics-using-nltk-and-sklearn">4. Analyse lyrics
using nltk and sklearn</a></li>
<li><a href="#prepare-data-for-tableau">5. Prepare data for
Tableau</a></li>
<li><a href="#tableau-dashboard">Tableau dashboard</a></li>
</ul>
</nav>
</div>
<p>This python notebook is used to collect necessary data about
Christian Music, before we do exploration using Tableau.<br />
In general, what this notebook does:<br />
1. Import libraries and setup necessary API<br />
2. Collect songs from Spotify<br />
3. Get song lyrics from GeniusLyrics<br />
4. Analyse lyrics using nltk and sklearn<br />
5. Prepare data for Tableau</p>
<h3 id="import-libraries-and-setup-necessary-api">1. Import libraries
and setup necessary API</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spotipy for Spotify API</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spotipy</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spotipy.util <span class="im">as</span> util</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spotipy.oauth2 <span class="im">import</span> SpotifyClientCredentials</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># lyricsgenius for Genius API</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> lyricsgenius <span class="im">as</span> lg</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Other common libraries</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span></code></pre></div>
<p>Next, we will need to provide Spotify and Genius API key. Refer to
this <a
href="https://developer.spotify.com/documentation/web-api/quick-start/">Spotify
API guide</a> and <a href="https://docs.genius.com/">Genius guide</a> to
get your API key.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup Spotify API id and secret</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>client_id <span class="op">=</span> <span class="st">&#39;insert_id_here&#39;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>client_secret <span class="op">=</span> <span class="st">&#39;insert_secret_here&#39;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>spotify <span class="op">=</span> spotipy.Spotify(client_credentials_manager<span class="op">=</span>SpotifyClientCredentials(client_id<span class="op">=</span>client_id,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                                                                              client_secret<span class="op">=</span>client_secret))</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup Genius API secret</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>genius_token <span class="op">=</span> <span class="st">&#39;insert_token_here&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>genius <span class="op">=</span> lg.Genius(genius_token, timeout<span class="op">=</span><span class="dv">20</span>, retries<span class="op">=</span><span class="dv">5</span>)</span></code></pre></div>
<h3 id="collect-songs-from-spotify">2. Collect songs from Spotify</h3>
<p>First, we will collect the songs information based on Christian
genre.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test Spotipy to retrieve Christian music genre</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> spotify.search(<span class="st">&#39;genre:Christian&#39;</span>, limit<span class="op">=</span><span class="dv">1</span>, <span class="bu">type</span><span class="op">=</span><span class="st">&#39;track&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result[<span class="st">&#39;tracks&#39;</span>])</span></code></pre></div>
<pre><code>{&#39;href&#39;: &#39;https://api.spotify.com/v1/search?query=genre%3AChristian&amp;type=track&amp;offset=0&amp;limit=1&#39;,  
&#39;items&#39;: [{&#39;album&#39;: {&#39;album_type&#39;: &#39;album&#39;, &#39;artists&#39;: [{&#39;external_urls&#39;: {&#39;spotify&#39;: &#39;https://open.spotify.com/artist/49bzE5vRBRIota4qeHtQM8&#39;},  
&#39;href&#39;: &#39;https://api.spotify.com/v1/artists/49bzE5vRBRIota4qeHtQM8&#39;, &#39;id&#39;: &#39;49bzE5vRBRIota4qeHtQM8&#39;, &#39;name&#39;: &#39;Skillet&#39;, &#39;type&#39;: &#39;artist&#39;,  
&#39;uri&#39;: &#39;spotify:artist:49bzE5vRBRIota4qeHtQM8&#39;}], &#39;available_markets&#39;: [&#39;AD&#39;, &#39;AE&#39;, &#39;AG&#39;, &#39;AL&#39;, &#39;AM&#39;, &#39;AO&#39;, &#39;AR&#39;, &#39;AU&#39;, &#39;AZ&#39;, &#39;BA&#39;, &#39;BB&#39;, &#39;BD&#39;, &#39;BE&#39;, &#39;BF&#39;, &#39;BG&#39;, &#39;BH&#39;, &#39;BI&#39;, &#39;BJ&#39;, &#39;BN&#39;, &#39;BO&#39;, &#39;BR&#39;, &#39;BS&#39;, &#39;BT&#39;, &#39;BW&#39;, &#39;BY&#39;, &#39;BZ&#39;, &#39;CA&#39;, &#39;CD&#39;, &#39;CG&#39;, &#39;CI&#39;, &#39;CL&#39;, &#39;CM&#39;, &#39;CO&#39;, &#39;CR&#39;, &#39;CV&#39;, &#39;CW&#39;, &#39;CY&#39;, &#39;CZ&#39;, &#39;DJ&#39;, &#39;DK&#39;, &#39;DM&#39;, &#39;DO&#39;, &#39;DZ&#39;, &#39;EC&#39;, &#39;EE&#39;, &#39;EG&#39;, &#39;ES&#39;, &#39;FI&#39;, &#39;FJ&#39;, &#39;FM&#39;, &#39;FR&#39;, &#39;GA&#39;, &#39;GB&#39;, &#39;GD&#39;, &#39;GE&#39;, &#39;GH&#39;, &#39;GM&#39;, &#39;GN&#39;, &#39;GQ&#39;, &#39;GR&#39;, &#39;GT&#39;, &#39;GW&#39;, &#39;GY&#39;, &#39;HK&#39;, &#39;HN&#39;, &#39;HR&#39;, &#39;HT&#39;, &#39;HU&#39;, &#39;ID&#39;, &#39;IE&#39;, &#39;IL&#39;, &#39;IN&#39;, &#39;IQ&#39;, &#39;IS&#39;, &#39;IT&#39;, &#39;JM&#39;, &#39;JO&#39;, &#39;JP&#39;, &#39;KE&#39;, &#39;KG&#39;, &#39;KH&#39;, &#39;KI&#39;, &#39;KM&#39;, &#39;KN&#39;, &#39;KR&#39;, &#39;KW&#39;, &#39;KZ&#39;, &#39;LA&#39;, &#39;LB&#39;, &#39;LC&#39;, &#39;LI&#39;, &#39;LK&#39;, &#39;LR&#39;, &#39;LS&#39;, &#39;LT&#39;, &#39;LU&#39;, &#39;LV&#39;, &#39;LY&#39;, &#39;MA&#39;, &#39;MC&#39;, &#39;MD&#39;, &#39;ME&#39;, &#39;MG&#39;, &#39;MH&#39;, &#39;MK&#39;, &#39;ML&#39;, &#39;MN&#39;, &#39;MO&#39;, &#39;MR&#39;, &#39;MT&#39;, &#39;MU&#39;, &#39;MV&#39;, &#39;MW&#39;, &#39;MX&#39;, &#39;MY&#39;, &#39;MZ&#39;, &#39;NA&#39;, &#39;NE&#39;, &#39;NG&#39;, &#39;NI&#39;, &#39;NL&#39;, &#39;NO&#39;, &#39;NP&#39;, &#39;NR&#39;, &#39;NZ&#39;, &#39;OM&#39;, &#39;PA&#39;, &#39;PE&#39;, &#39;PG&#39;, &#39;PH&#39;, &#39;PK&#39;, &#39;PL&#39;, &#39;PS&#39;, &#39;PT&#39;, &#39;PW&#39;, &#39;PY&#39;, &#39;QA&#39;, &#39;RO&#39;, &#39;RS&#39;, &#39;RW&#39;, &#39;SA&#39;, &#39;SB&#39;, &#39;SC&#39;, &#39;SE&#39;, &#39;SI&#39;, &#39;SK&#39;, &#39;SL&#39;, &#39;SM&#39;, &#39;SN&#39;, &#39;SR&#39;, &#39;ST&#39;, &#39;SV&#39;, &#39;SZ&#39;, &#39;TD&#39;, &#39;TG&#39;, &#39;TH&#39;, &#39;TJ&#39;, &#39;TL&#39;, &#39;TN&#39;, &#39;TO&#39;, &#39;TR&#39;, &#39;TT&#39;, &#39;TV&#39;, &#39;TW&#39;, &#39;TZ&#39;, &#39;UA&#39;, &#39;UG&#39;, &#39;US&#39;, &#39;UY&#39;, &#39;UZ&#39;, &#39;VC&#39;, &#39;VE&#39;, &#39;VN&#39;, &#39;VU&#39;, &#39;WS&#39;, &#39;XK&#39;, &#39;ZA&#39;, &#39;ZM&#39;, &#39;ZW&#39;],  
&#39;external_urls&#39;: {&#39;spotify&#39;: &#39;https://open.spotify.com/album/0RySAmM6oDPGSE03X3dzi1&#39;}, &#39;href&#39;: &#39;https://api.spotify.com/v1/albums/0RySAmM6oDPGSE03X3dzi1&#39;, &#39;id&#39;: &#39;0RySAmM6oDPGSE03X3dzi1&#39;, &#39;images&#39;: [{&#39;height&#39;: 640,  
&#39;url&#39;: &#39;https://i.scdn.co/image/ab67616d0000b27343e531d5f69170aba281ef43&#39;, &#39;width&#39;: 640}, {&#39;height&#39;: 300, &#39;url&#39;: &#39;https://i.scdn.co/image/ab67616d00001e0243e531d5f69170aba281ef43&#39;, &#39;width&#39;: 300}, {&#39;height&#39;: 64, &#39;url&#39;: &#39;https://i.scdn.co/image/ab67616d0000485143e531d5f69170aba281ef43&#39;, &#39;width&#39;: 64}], &#39;name&#39;: &#39;Awake&#39;, &#39;release_date&#39;: &#39;2009-08-21&#39;, &#39;release_date_precision&#39;: &#39;day&#39;, &#39;total_tracks&#39;: 12, &#39;type&#39;: &#39;album&#39;,  
&#39;uri&#39;: &#39;spotify:album:0RySAmM6oDPGSE03X3dzi1&#39;}, &#39;artists&#39;: [{&#39;external_urls&#39;: {&#39;spotify&#39;: &#39;https://open.spotify.com/artist/49bzE5vRBRIota4qeHtQM8&#39;}, &#39;href&#39;: &#39;https://api.spotify.com/v1/artists/49bzE5vRBRIota4qeHtQM8&#39;,  
&#39;id&#39;: &#39;49bzE5vRBRIota4qeHtQM8&#39;, &#39;name&#39;: &#39;Skillet&#39;, &#39;type&#39;: &#39;artist&#39;, &#39;uri&#39;: &#39;spotify:artist:49bzE5vRBRIota4qeHtQM8&#39;}], &#39;available_markets&#39;: [&#39;AD&#39;, &#39;AE&#39;, &#39;AG&#39;, &#39;AL&#39;, &#39;AM&#39;, &#39;AO&#39;, &#39;AR&#39;, &#39;AU&#39;, &#39;AZ&#39;, &#39;BA&#39;, &#39;BB&#39;, &#39;BD&#39;, &#39;BE&#39;, &#39;BF&#39;, &#39;BG&#39;, &#39;BH&#39;, &#39;BI&#39;, &#39;BJ&#39;, &#39;BN&#39;, &#39;BO&#39;, &#39;BR&#39;, &#39;BS&#39;, &#39;BT&#39;, &#39;BW&#39;, &#39;BY&#39;, &#39;BZ&#39;, &#39;CA&#39;, &#39;CD&#39;, &#39;CG&#39;, &#39;CI&#39;, &#39;CL&#39;, &#39;CM&#39;, &#39;CO&#39;, &#39;CR&#39;, &#39;CV&#39;, &#39;CW&#39;, &#39;CY&#39;, &#39;CZ&#39;, &#39;DJ&#39;, &#39;DK&#39;, &#39;DM&#39;, &#39;DO&#39;, &#39;DZ&#39;, &#39;EC&#39;, &#39;EE&#39;, &#39;EG&#39;, &#39;ES&#39;, &#39;FI&#39;, &#39;FJ&#39;, &#39;FM&#39;, &#39;FR&#39;, &#39;GA&#39;, &#39;GB&#39;, &#39;GD&#39;, &#39;GE&#39;, &#39;GH&#39;, &#39;GM&#39;, &#39;GN&#39;, &#39;GQ&#39;, &#39;GR&#39;, &#39;GT&#39;, &#39;GW&#39;, &#39;GY&#39;, &#39;HK&#39;, &#39;HN&#39;, &#39;HR&#39;, &#39;HT&#39;, &#39;HU&#39;, &#39;ID&#39;, &#39;IE&#39;, &#39;IL&#39;, &#39;IN&#39;, &#39;IQ&#39;, &#39;IS&#39;, &#39;IT&#39;, &#39;JM&#39;, &#39;JO&#39;, &#39;JP&#39;, &#39;KE&#39;, &#39;KG&#39;, &#39;KH&#39;, &#39;KI&#39;, &#39;KM&#39;, &#39;KN&#39;, &#39;KR&#39;, &#39;KW&#39;, &#39;KZ&#39;, &#39;LA&#39;, &#39;LB&#39;, &#39;LC&#39;, &#39;LI&#39;, &#39;LK&#39;, &#39;LR&#39;, &#39;LS&#39;, &#39;LT&#39;, &#39;LU&#39;, &#39;LV&#39;, &#39;LY&#39;, &#39;MA&#39;, &#39;MC&#39;, &#39;MD&#39;, &#39;ME&#39;, &#39;MG&#39;, &#39;MH&#39;, &#39;MK&#39;, &#39;ML&#39;, &#39;MN&#39;, &#39;MO&#39;, &#39;MR&#39;, &#39;MT&#39;, &#39;MU&#39;, &#39;MV&#39;, &#39;MW&#39;, &#39;MX&#39;, &#39;MY&#39;, &#39;MZ&#39;, &#39;NA&#39;, &#39;NE&#39;, &#39;NG&#39;, &#39;NI&#39;, &#39;NL&#39;, &#39;NO&#39;, &#39;NP&#39;, &#39;NR&#39;, &#39;NZ&#39;, &#39;OM&#39;, &#39;PA&#39;, &#39;PE&#39;, &#39;PG&#39;, &#39;PH&#39;, &#39;PK&#39;, &#39;PL&#39;, &#39;PS&#39;, &#39;PT&#39;, &#39;PW&#39;, &#39;PY&#39;, &#39;QA&#39;, &#39;RO&#39;, &#39;RS&#39;, &#39;RW&#39;, &#39;SA&#39;, &#39;SB&#39;, &#39;SC&#39;, &#39;SE&#39;, &#39;SI&#39;, &#39;SK&#39;, &#39;SL&#39;, &#39;SM&#39;, &#39;SN&#39;, &#39;SR&#39;, &#39;ST&#39;, &#39;SV&#39;, &#39;SZ&#39;, &#39;TD&#39;, &#39;TG&#39;, &#39;TH&#39;, &#39;TJ&#39;, &#39;TL&#39;, &#39;TN&#39;, &#39;TO&#39;, &#39;TR&#39;, &#39;TT&#39;, &#39;TV&#39;, &#39;TW&#39;, &#39;TZ&#39;, &#39;UA&#39;, &#39;UG&#39;, &#39;US&#39;, &#39;UY&#39;, &#39;UZ&#39;, &#39;VC&#39;, &#39;VE&#39;, &#39;VN&#39;, &#39;VU&#39;, &#39;WS&#39;, &#39;XK&#39;, &#39;ZA&#39;, &#39;ZM&#39;, &#39;ZW&#39;], &#39;disc_number&#39;: 1, &#39;duration_ms&#39;: 178013, &#39;explicit&#39;: False,  
&#39;external_ids&#39;: {&#39;isrc&#39;: &#39;USAT20901851&#39;}, &#39;external_urls&#39;: {&#39;spotify&#39;: &#39;https://open.spotify.com/track/2UREu1Y8CO4jXkbvqAtP7g&#39;}, &#39;href&#39;: &#39;https://api.spotify.com/v1/tracks/2UREu1Y8CO4jXkbvqAtP7g&#39;, &#39;id&#39;: &#39;2UREu1Y8CO4jXkbvqAtP7g&#39;, &#39;is_local&#39;: False, &#39;name&#39;: &#39;Monster&#39;,  
&#39;popularity&#39;: 78, &#39;preview_url&#39;: &#39;https://p.scdn.co/mp3-preview/7b31bef137993a2f2a1389e333cfb70df4aefb0d?cid=7ff96ed29e48468ca89c5e2dd2903b21&#39;, &#39;track_number&#39;: 2, &#39;type&#39;: &#39;track&#39;, &#39;uri&#39;: &#39;spotify:track:2UREu1Y8CO4jXkbvqAtP7g&#39;}], &#39;limit&#39;: 1,  
&#39;next&#39;: &#39;https://api.spotify.com/v1/search?query=genre%3AChristian&amp;type=track&amp;offset=1&amp;limit=1&#39;, &#39;offset&#39;: 0, &#39;previous&#39;: None, &#39;total&#39;: 10000}</code></pre>
<p>Now we know the API works, let’s get Christian music tracks from
1990-2021.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># collect more tracks from year 1990 - 2021</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>ls_year <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>,<span class="dv">2022</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>result_year <span class="op">=</span> {}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> y <span class="kw">in</span> ls_year:</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;collecting songs from &#39;</span> <span class="op">+</span> <span class="bu">str</span>(y))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">&#39;genre:&quot;christian music&quot;+year:&#39;</span><span class="op">+</span><span class="bu">str</span>(y)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> spotify.search(query, limit<span class="op">=</span><span class="dv">50</span>, <span class="bu">type</span><span class="op">=</span><span class="st">&#39;track&#39;</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    ls_tracks <span class="op">=</span> result[<span class="st">&#39;tracks&#39;</span>][<span class="st">&#39;items&#39;</span>]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> result[<span class="st">&#39;tracks&#39;</span>][<span class="st">&#39;next&#39;</span>] <span class="kw">and</span> <span class="bu">len</span>(ls_tracks)<span class="op">&lt;</span><span class="dv">1000</span>: <span class="co"># Spotify API limits up to 1000 songs</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            result <span class="op">=</span> spotify.<span class="bu">next</span>(result[<span class="st">&#39;tracks&#39;</span>])</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            ls_tracks.extend(result[<span class="st">&#39;tracks&#39;</span>][<span class="st">&#39;items&#39;</span>])</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="co"># break while loop if there is no more song to be retrieved</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    result_year[y] <span class="op">=</span> ls_tracks</span></code></pre></div>
<pre><code>collecting songs from 1990
collecting songs from 1991
collecting songs from 1992
collecting songs from 1993
collecting songs from 1994
collecting songs from 1995
collecting songs from 1996
collecting songs from 1997
collecting songs from 1998
collecting songs from 1999
collecting songs from 2000
collecting songs from 2001
collecting songs from 2002
collecting songs from 2003
collecting songs from 2004
collecting songs from 2005
collecting songs from 2006
collecting songs from 2007
collecting songs from 2008
collecting songs from 2009
collecting songs from 2010
collecting songs from 2011
collecting songs from 2012
collecting songs from 2013
collecting songs from 2014
collecting songs from 2015
collecting songs from 2016
collecting songs from 2017
collecting songs from 2018
collecting songs from 2019
collecting songs from 2020
collecting songs from 2021</code></pre>
<p>We will store them as Pandas dataframe for further manipulation.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert result to Pandas dataframe for manipulation</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> result_year.keys():</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    df_temp <span class="op">=</span> pd.DataFrame(result_year[k])</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    df1 <span class="op">=</span> pd.concat([df1, df_temp],ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
album
</th>
<th>
artists
</th>
<th>
available_markets
</th>
<th>
disc_number
</th>
<th>
duration_ms
</th>
<th>
explicit
</th>
<th>
external_ids
</th>
<th>
external_urls
</th>
<th>
href
</th>
<th>
id
</th>
<th>
is_local
</th>
<th>
name
</th>
<th>
popularity
</th>
<th>
preview_url
</th>
<th>
track_number
</th>
<th>
type
</th>
<th>
uri
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
280866
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USCM19311591’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/1e"
class="uri">https://open.spotify.com/track/1e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/1egPCejtdWP3"
class="uri">https://api.spotify.com/v1/tracks/1egPCejtdWP3</a>…
</td>
<td>
1egPCejtdWP3KRNwGNxbtZ
</td>
<td>
False
</td>
<td>
How Beautiful
</td>
<td>
52
</td>
<td>
None
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:1egPCejtdWP3KRNwGNxbtZ"
class="uri">spotify:track:1egPCejtdWP3KRNwGNxbtZ</a>
</td>
</tr>
<tr>
<th>
1
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
240173
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USRR49000003’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/0P"
class="uri">https://open.spotify.com/track/0P</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/0PKTBeN87JYJ"
class="uri">https://api.spotify.com/v1/tracks/0PKTBeN87JYJ</a>…
</td>
<td>
0PKTBeN87JYJ1mRzrq5Aog
</td>
<td>
False
</td>
<td>
Place In This World
</td>
<td>
47
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/1bd0020320eed3b0"
class="uri">https://p.scdn.co/mp3-preview/1bd0020320eed3b0</a>…
</td>
<td>
3
</td>
<td>
track
</td>
<td>
<a href="spotify:track:0PKTBeN87JYJ1mRzrq5Aog"
class="uri">spotify:track:0PKTBeN87JYJ1mRzrq5Aog</a>
</td>
</tr>
<tr>
<th>
2
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AZ, BA, BB, B…
</td>
<td>
1
</td>
<td>
297666
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USBE19000006’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6z"
class="uri">https://open.spotify.com/track/6z</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/6zTrDHttc6yX"
class="uri">https://api.spotify.com/v1/tracks/6zTrDHttc6yX</a>…
</td>
<td>
6zTrDHttc6yXR5Wc9n816G
</td>
<td>
False
</td>
<td>
Where There Is Faith
</td>
<td>
33
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/c2f2189f9e559c02"
class="uri">https://p.scdn.co/mp3-preview/c2f2189f9e559c02</a>…
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:6zTrDHttc6yXR5Wc9n816G"
class="uri">spotify:track:6zTrDHttc6yXR5Wc9n816G</a>
</td>
</tr>
<tr>
<th>
3
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
327800
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60100020’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3g"
class="uri">https://open.spotify.com/track/3g</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS"
class="uri">https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS</a>…
</td>
<td>
3gVhqz1WJ3TSr4ildgU0KD
</td>
<td>
False
</td>
<td>
Another Time, Another Place
</td>
<td>
35
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/6b688e7cde4c07d2"
class="uri">https://p.scdn.co/mp3-preview/6b688e7cde4c07d2</a>…
</td>
<td>
2
</td>
<td>
track
</td>
<td>
<a href="spotify:track:3gVhqz1WJ3TSr4ildgU0KD"
class="uri">spotify:track:3gVhqz1WJ3TSr4ildgU0KD</a>
</td>
</tr>
<tr>
<th>
4
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
284466
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60251849’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/4e"
class="uri">https://open.spotify.com/track/4e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/4eBAni9FeqKv"
class="uri">https://api.spotify.com/v1/tracks/4eBAni9FeqKv</a>…
</td>
<td>
4eBAni9FeqKv9JQqwOF4VM
</td>
<td>
False
</td>
<td>
Home Free
</td>
<td>
32
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e"
class="uri">https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e</a>…
</td>
<td>
4
</td>
<td>
track
</td>
<td>
<a href="spotify:track:4eBAni9FeqKv9JQqwOF4VM"
class="uri">spotify:track:4eBAni9FeqKv9JQqwOF4VM</a>
</td>
</tr>
</tbody>
</table>
</div>
<p>Get relevant information for each tracks such as release date/year,
artist, and track name.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract relevant information about songs</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">&#39;release_date&#39;</span>] <span class="op">=</span> df1.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;album&#39;</span>][<span class="st">&#39;release_date&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">&#39;artists_name&#39;</span>] <span class="op">=</span> df1.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;album&#39;</span>][<span class="st">&#39;artists&#39;</span>][<span class="dv">0</span>][<span class="st">&#39;name&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">&#39;track_name&#39;</span>] <span class="op">=</span> df1.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;album&#39;</span>][<span class="st">&#39;name&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">&#39;release_year&#39;</span>] <span class="op">=</span> df1.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;release_date&#39;</span>][:<span class="dv">4</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
album
</th>
<th>
artists
</th>
<th>
available_markets
</th>
<th>
disc_number
</th>
<th>
duration_ms
</th>
<th>
explicit
</th>
<th>
external_ids
</th>
<th>
external_urls
</th>
<th>
href
</th>
<th>
id
</th>
<th>
…
</th>
<th>
name
</th>
<th>
popularity
</th>
<th>
preview_url
</th>
<th>
track_number
</th>
<th>
type
</th>
<th>
uri
</th>
<th>
release_date
</th>
<th>
artists_name
</th>
<th>
track_name
</th>
<th>
release_year
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
280866
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USCM19311591’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/1e"
class="uri">https://open.spotify.com/track/1e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/1egPCejtdWP3"
class="uri">https://api.spotify.com/v1/tracks/1egPCejtdWP3</a>…
</td>
<td>
1egPCejtdWP3KRNwGNxbtZ
</td>
<td>
…
</td>
<td>
How Beautiful
</td>
<td>
52
</td>
<td>
None
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:1egPCejtdWP3KRNwGNxbtZ"
class="uri">spotify:track:1egPCejtdWP3KRNwGNxbtZ</a>
</td>
<td>
1990-01-01
</td>
<td>
Twila Paris
</td>
<td>
Cry For The Desert
</td>
<td>
1990
</td>
</tr>
<tr>
<th>
1
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
240173
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USRR49000003’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/0P"
class="uri">https://open.spotify.com/track/0P</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/0PKTBeN87JYJ"
class="uri">https://api.spotify.com/v1/tracks/0PKTBeN87JYJ</a>…
</td>
<td>
0PKTBeN87JYJ1mRzrq5Aog
</td>
<td>
…
</td>
<td>
Place In This World
</td>
<td>
47
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/1bd0020320eed3b0"
class="uri">https://p.scdn.co/mp3-preview/1bd0020320eed3b0</a>…
</td>
<td>
3
</td>
<td>
track
</td>
<td>
<a href="spotify:track:0PKTBeN87JYJ1mRzrq5Aog"
class="uri">spotify:track:0PKTBeN87JYJ1mRzrq5Aog</a>
</td>
<td>
1990
</td>
<td>
Michael W. Smith
</td>
<td>
Go West Young Man
</td>
<td>
1990
</td>
</tr>
<tr>
<th>
2
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AZ, BA, BB, B…
</td>
<td>
1
</td>
<td>
297666
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USBE19000006’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6z"
class="uri">https://open.spotify.com/track/6z</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/6zTrDHttc6yX"
class="uri">https://api.spotify.com/v1/tracks/6zTrDHttc6yX</a>…
</td>
<td>
6zTrDHttc6yXR5Wc9n816G
</td>
<td>
…
</td>
<td>
Where There Is Faith
</td>
<td>
33
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/c2f2189f9e559c02"
class="uri">https://p.scdn.co/mp3-preview/c2f2189f9e559c02</a>…
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:6zTrDHttc6yXR5Wc9n816G"
class="uri">spotify:track:6zTrDHttc6yXR5Wc9n816G</a>
</td>
<td>
1990
</td>
<td>
4Him
</td>
<td>
4Him
</td>
<td>
1990
</td>
</tr>
<tr>
<th>
3
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
327800
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60100020’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3g"
class="uri">https://open.spotify.com/track/3g</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS"
class="uri">https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS</a>…
</td>
<td>
3gVhqz1WJ3TSr4ildgU0KD
</td>
<td>
…
</td>
<td>
Another Time, Another Place
</td>
<td>
35
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/6b688e7cde4c07d2"
class="uri">https://p.scdn.co/mp3-preview/6b688e7cde4c07d2</a>…
</td>
<td>
2
</td>
<td>
track
</td>
<td>
<a href="spotify:track:3gVhqz1WJ3TSr4ildgU0KD"
class="uri">spotify:track:3gVhqz1WJ3TSr4ildgU0KD</a>
</td>
<td>
1990-10-01
</td>
<td>
Sandi Patty
</td>
<td>
Another Time…Another Place
</td>
<td>
1990
</td>
</tr>
<tr>
<th>
4
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
284466
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60251849’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/4e"
class="uri">https://open.spotify.com/track/4e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/4eBAni9FeqKv"
class="uri">https://api.spotify.com/v1/tracks/4eBAni9FeqKv</a>…
</td>
<td>
4eBAni9FeqKv9JQqwOF4VM
</td>
<td>
…
</td>
<td>
Home Free
</td>
<td>
32
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e"
class="uri">https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e</a>…
</td>
<td>
4
</td>
<td>
track
</td>
<td>
<a href="spotify:track:4eBAni9FeqKv9JQqwOF4VM"
class="uri">spotify:track:4eBAni9FeqKv9JQqwOF4VM</a>
</td>
<td>
1990-01-01
</td>
<td>
Wayne Watson
</td>
<td>
Home Free
</td>
<td>
1990
</td>
</tr>
</tbody>
</table>
<p>
5 rows × 21 columns
</p>
</div>
<p>We want to see if we manage to get at least 100 tracks for each
year.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check how many songs succesfully retrieved for each year (at least there are 100 songs for each eyar)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df1.groupby(by<span class="op">=</span>[<span class="st">&#39;release_year&#39;</span>]).agg({<span class="st">&#39;release_year&#39;</span>: <span class="st">&#39;count&#39;</span>})</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
release_year
</th>
</tr>
<tr>
<th>
release_year
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
1990
</th>
<td>
239
</td>
</tr>
<tr>
<th>
1991
</th>
<td>
170
</td>
</tr>
<tr>
<th>
1992
</th>
<td>
291
</td>
</tr>
<tr>
<th>
1993
</th>
<td>
316
</td>
</tr>
<tr>
<th>
1994
</th>
<td>
291
</td>
</tr>
<tr>
<th>
1995
</th>
<td>
468
</td>
</tr>
<tr>
<th>
1996
</th>
<td>
339
</td>
</tr>
<tr>
<th>
1997
</th>
<td>
481
</td>
</tr>
<tr>
<th>
1998
</th>
<td>
490
</td>
</tr>
<tr>
<th>
1999
</th>
<td>
796
</td>
</tr>
<tr>
<th>
2000
</th>
<td>
706
</td>
</tr>
<tr>
<th>
2001
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2002
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2003
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2004
</th>
<td>
984
</td>
</tr>
<tr>
<th>
2005
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2006
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2007
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2008
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2009
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2010
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2011
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2012
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2013
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2014
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2015
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2016
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2017
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2018
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2019
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2020
</th>
<td>
1000
</td>
</tr>
<tr>
<th>
2021
</th>
<td>
1000
</td>
</tr>
</tbody>
</table>
</div>
<p>Next, we want to get the track features for each song tracks.</p>
<p><strong>Notes about track features:</strong><br />
Acousticness - A confidence measure from 0.0 to 1.0 of whether the track
is acoustic. 1.0 represents high confidence the track is acoustic.</p>
<p>Danceability - Describes how suitable a track is for dancing based on
a combination of musical elements including tempo, rhythm stability,
beat strength, and overall regularity. A value of 0.0 is least danceable
and 1.0 is most danceable.</p>
<p>Energy - A measure from 0.0 to 1.0 and represents a perceptual
measure of intensity and activity. Typically, energetic tracks feel
fast, loud, and noisy. For example, death metal has high energy, while a
Bach prelude scores low on the scale. Perceptual features contributing
to this attribute include dynamic range, perceived loudness, timbre,
onset rate, and general entropy.</p>
<p>Instrumentalness - Predicts whether a track contains no vocals. “Ooh”
and “aah” sounds are treated as instrumental in this context. Rap or
spoken word tracks are clearly “vocal”. The closer the instrumentalness
value is to 1.0, the greater likelihood the track contains no vocal
content. Values above 0.5 are intended to represent instrumental tracks,
but confidence is higher as the value approaches 1.0.</p>
<p>Liveness - Detects the presence of an audience in the recording.
Higher liveness values represent an increased probability that the track
was performed live. A value above 0.8 provides strong likelihood that
the track is live.</p>
<p>Loudness - The overall loudness of a track in decibels (dB). Loudness
values are averaged across the entire track and are useful for comparing
relative loudness of tracks. Loudness is the quality of a sound that is
the primary psychological correlate of physical strength (amplitude).
Values typically range between -60 and 0 db.</p>
<p>Speechiness - Detects the presence of spoken words in a track. The
more exclusively speech-like the recording (e.g. talk show, audio book,
poetry), the closer to 1.0 the attribute value. Values above 0.66
describe tracks that are probably made entirely of spoken words. Values
between 0.33 and 0.66 describe tracks that may contain both music and
speech, either in sections or layered, including such cases as rap
music. Values below 0.33 most likely represent music and other
non-speech-like tracks.</p>
<p>Tempo - The overall estimated tempo of a track in beats per minute
(BPM). In musical terminology, tempo is the speed or pace of a given
piece and derives directly from the average beat duration.</p>
<p>Valence - A measure from 0.0 to 1.0 describing the musical
positiveness conveyed by a track. Tracks with high valence sound more
positive (e.g. happy, cheerful, euphoric), while tracks with low valence
sound more negative (e.g. sad, depressed, angry).</p>
<p>Popularity - The popularity of the track. The value will be between 0
and 100, with 100 being the most popular. The popularity of a track is a
value between 0 and 100, with 100 being the most popular. The popularity
is calculated by algorithm and is based, in the most part, on the total
number of plays the track has had and how recent those plays are.
Generally speaking, songs that are being played a lot now will have a
higher popularity than songs that were played a lot in the past.
Duplicate tracks (e.g. the same track from a single and an album) are
rated independently. Artist and album popularity is derived
mathematically from track popularity.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get audio track features (max 100 ids per request)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>i<span class="op">=</span><span class="dv">0</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(df1):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i<span class="op">+</span><span class="dv">99</span> <span class="op">&lt;</span> <span class="bu">len</span>(df1):</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        df1.loc[i:i<span class="op">+</span><span class="dv">99</span>,<span class="st">&#39;track_features&#39;</span>] <span class="op">=</span> spotify.audio_features(tracks<span class="op">=</span>df1.loc[i:i<span class="op">+</span><span class="dv">99</span>,<span class="st">&#39;id&#39;</span>].to_list())</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        df1.loc[i:,<span class="st">&#39;track_features&#39;</span>] <span class="op">=</span> spotify.audio_features(tracks<span class="op">=</span>df1.loc[i:,<span class="st">&#39;id&#39;</span>].to_list())</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    i<span class="op">+=</span><span class="dv">100</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
album
</th>
<th>
artists
</th>
<th>
available_markets
</th>
<th>
disc_number
</th>
<th>
duration_ms
</th>
<th>
explicit
</th>
<th>
external_ids
</th>
<th>
external_urls
</th>
<th>
href
</th>
<th>
id
</th>
<th>
…
</th>
<th>
popularity
</th>
<th>
preview_url
</th>
<th>
track_number
</th>
<th>
type
</th>
<th>
uri
</th>
<th>
release_date
</th>
<th>
artists_name
</th>
<th>
track_name
</th>
<th>
release_year
</th>
<th>
track_features
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
280866
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USCM19311591’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/1e"
class="uri">https://open.spotify.com/track/1e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/1egPCejtdWP3"
class="uri">https://api.spotify.com/v1/tracks/1egPCejtdWP3</a>…
</td>
<td>
1egPCejtdWP3KRNwGNxbtZ
</td>
<td>
…
</td>
<td>
52
</td>
<td>
None
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:1egPCejtdWP3KRNwGNxbtZ"
class="uri">spotify:track:1egPCejtdWP3KRNwGNxbtZ</a>
</td>
<td>
1990-01-01
</td>
<td>
Twila Paris
</td>
<td>
Cry For The Desert
</td>
<td>
1990
</td>
<td>
{‘danceability’: 0.296, ‘energy’: 0.284, ‘key’…
</td>
</tr>
<tr>
<th>
1
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
240173
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USRR49000003’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/0P"
class="uri">https://open.spotify.com/track/0P</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/0PKTBeN87JYJ"
class="uri">https://api.spotify.com/v1/tracks/0PKTBeN87JYJ</a>…
</td>
<td>
0PKTBeN87JYJ1mRzrq5Aog
</td>
<td>
…
</td>
<td>
47
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/1bd0020320eed3b0"
class="uri">https://p.scdn.co/mp3-preview/1bd0020320eed3b0</a>…
</td>
<td>
3
</td>
<td>
track
</td>
<td>
<a href="spotify:track:0PKTBeN87JYJ1mRzrq5Aog"
class="uri">spotify:track:0PKTBeN87JYJ1mRzrq5Aog</a>
</td>
<td>
1990
</td>
<td>
Michael W. Smith
</td>
<td>
Go West Young Man
</td>
<td>
1990
</td>
<td>
{‘danceability’: 0.446, ‘energy’: 0.559, ‘key’…
</td>
</tr>
<tr>
<th>
2
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AZ, BA, BB, B…
</td>
<td>
1
</td>
<td>
297666
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USBE19000006’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6z"
class="uri">https://open.spotify.com/track/6z</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/6zTrDHttc6yX"
class="uri">https://api.spotify.com/v1/tracks/6zTrDHttc6yX</a>…
</td>
<td>
6zTrDHttc6yXR5Wc9n816G
</td>
<td>
…
</td>
<td>
33
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/c2f2189f9e559c02"
class="uri">https://p.scdn.co/mp3-preview/c2f2189f9e559c02</a>…
</td>
<td>
6
</td>
<td>
track
</td>
<td>
<a href="spotify:track:6zTrDHttc6yXR5Wc9n816G"
class="uri">spotify:track:6zTrDHttc6yXR5Wc9n816G</a>
</td>
<td>
1990
</td>
<td>
4Him
</td>
<td>
4Him
</td>
<td>
1990
</td>
<td>
{‘danceability’: 0.542, ‘energy’: 0.582, ‘key’…
</td>
</tr>
<tr>
<th>
3
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
327800
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60100020’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3g"
class="uri">https://open.spotify.com/track/3g</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS"
class="uri">https://api.spotify.com/v1/tracks/3gVhqz1WJ3TS</a>…
</td>
<td>
3gVhqz1WJ3TSr4ildgU0KD
</td>
<td>
…
</td>
<td>
35
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/6b688e7cde4c07d2"
class="uri">https://p.scdn.co/mp3-preview/6b688e7cde4c07d2</a>…
</td>
<td>
2
</td>
<td>
track
</td>
<td>
<a href="spotify:track:3gVhqz1WJ3TSr4ildgU0KD"
class="uri">spotify:track:3gVhqz1WJ3TSr4ildgU0KD</a>
</td>
<td>
1990-10-01
</td>
<td>
Sandi Patty
</td>
<td>
Another Time…Another Place
</td>
<td>
1990
</td>
<td>
{‘danceability’: 0.377, ‘energy’: 0.537, ‘key’…
</td>
</tr>
<tr>
<th>
4
</th>
<td>
{‘album_type’: ‘album’, ‘artists’: [{’external…
</td>
<td>
[{‘external_urls’: {‘spotify’: ’<a href="https://open.s"
class="uri">https://open.s</a>…
</td>
<td>
[AD, AE, AG, AL, AM, AO, AR, AT, AU, AZ, BA, B…
</td>
<td>
1
</td>
<td>
284466
</td>
<td>
False
</td>
<td>
{‘isrc’: ‘USWR60251849’}
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/4e"
class="uri">https://open.spotify.com/track/4e</a>…
</td>
<td>
<a href="https://api.spotify.com/v1/tracks/4eBAni9FeqKv"
class="uri">https://api.spotify.com/v1/tracks/4eBAni9FeqKv</a>…
</td>
<td>
4eBAni9FeqKv9JQqwOF4VM
</td>
<td>
…
</td>
<td>
32
</td>
<td>
<a href="https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e"
class="uri">https://p.scdn.co/mp3-preview/7312bcd0ffcd2a7e</a>…
</td>
<td>
4
</td>
<td>
track
</td>
<td>
<a href="spotify:track:4eBAni9FeqKv9JQqwOF4VM"
class="uri">spotify:track:4eBAni9FeqKv9JQqwOF4VM</a>
</td>
<td>
1990-01-01
</td>
<td>
Wayne Watson
</td>
<td>
Home Free
</td>
<td>
1990
</td>
<td>
{‘danceability’: 0.573, ‘energy’: 0.331, ‘key’…
</td>
</tr>
</tbody>
</table>
<p>
5 rows × 22 columns
</p>
</div>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check dataframe columns</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df1.columns.sort_values()</span></code></pre></div>
<pre><code>Index([&#39;album&#39;, &#39;artists&#39;, &#39;artists_name&#39;, &#39;available_markets&#39;, &#39;disc_number&#39;,
       &#39;duration_ms&#39;, &#39;explicit&#39;, &#39;external_ids&#39;, &#39;external_urls&#39;, &#39;href&#39;,
       &#39;id&#39;, &#39;is_local&#39;, &#39;name&#39;, &#39;popularity&#39;, &#39;preview_url&#39;, &#39;release_date&#39;,
       &#39;release_year&#39;, &#39;track_features&#39;, &#39;track_name&#39;, &#39;track_number&#39;, &#39;type&#39;,
       &#39;uri&#39;],
      dtype=&#39;object&#39;)</code></pre>
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand features to dataframe columns</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>feat_cols <span class="op">=</span> [<span class="st">&#39;danceability&#39;</span>, <span class="st">&#39;energy&#39;</span>, <span class="st">&#39;key&#39;</span>, <span class="st">&#39;loudness&#39;</span>, <span class="st">&#39;mode&#39;</span>, <span class="st">&#39;speechiness&#39;</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;acousticness&#39;</span>, <span class="st">&#39;instrumentalness&#39;</span>, <span class="st">&#39;liveness&#39;</span>, <span class="st">&#39;valence&#39;</span>, <span class="st">&#39;tempo&#39;</span>, <span class="st">&#39;time_signature&#39;</span>]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.concat([df1.drop([<span class="st">&#39;track_features&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                 df1[<span class="st">&#39;track_features&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: pd.Series(x)[feat_cols])], axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check data types</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df2.info()</span></code></pre></div>
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 25571 entries, 0 to 25570
Data columns (total 33 columns):
 #   Column             Non-Null Count  Dtype  
---  ------             --------------  -----  
 0   album              25571 non-null  object 
 1   artists            25571 non-null  object 
 2   available_markets  25571 non-null  object 
 3   disc_number        25571 non-null  int64  
 4   duration_ms        25571 non-null  int64  
 5   explicit           25571 non-null  bool   
 6   external_ids       25571 non-null  object 
 7   external_urls      25571 non-null  object 
 8   href               25571 non-null  object 
 9   id                 25571 non-null  object 
 10  is_local           25571 non-null  bool   
 11  name               25571 non-null  object 
 12  popularity         25571 non-null  int64  
 13  preview_url        14738 non-null  object 
 14  track_number       25571 non-null  int64  
 15  type               25571 non-null  object 
 16  uri                25571 non-null  object 
 17  release_date       25571 non-null  object 
 18  artists_name       25571 non-null  object 
 19  track_name         25571 non-null  object 
 20  release_year       25571 non-null  object 
 21  danceability       25571 non-null  float64
 22  energy             25571 non-null  float64
 23  key                25571 non-null  int64  
 24  loudness           25571 non-null  float64
 25  mode               25571 non-null  int64  
 26  speechiness        25571 non-null  float64
 27  acousticness       25571 non-null  float64
 28  instrumentalness   25571 non-null  float64
 29  liveness           25571 non-null  float64
 30  valence            25571 non-null  float64
 31  tempo              25571 non-null  float64
 32  time_signature     25571 non-null  int64  
dtypes: bool(2), float64(9), int64(7), object(15)
memory usage: 6.1+ MB</code></pre>
<p>We have extracted a lot of data up to now, let’s save it to pickle
file.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># export dataframe to pickle for easy retrieval next time</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;songs.pickle&#39;</span>, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    pickle.dump(df2, f, pickle.HIGHEST_PROTOCOL)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># for importing the exported pickle files</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;songs.pickle&#39;</span>, <span class="st">&#39;rb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    df2 <span class="op">=</span> pickle.load(f)</span></code></pre></div>
<p>Let’s check our data and see if there is any duplicate.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dfg <span class="op">=</span> df2.groupby(by<span class="op">=</span>[<span class="st">&#39;name&#39;</span>,<span class="st">&#39;artists_name&#39;</span>]).agg({<span class="st">&#39;id&#39;</span>:<span class="st">&#39;count&#39;</span>}).sort_values(by<span class="op">=</span><span class="st">&#39;id&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>dfg[dfg[<span class="st">&#39;id&#39;</span>]<span class="op">&gt;</span><span class="dv">1</span>]</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
</th>
<th>
id
</th>
</tr>
<tr>
<th>
name
</th>
<th>
artists_name
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
Shout to the Lord
</th>
<th>
Various Artists
</th>
<td>
10
</td>
</tr>
<tr>
<th>
Shine
</th>
<th>
Newsboys
</th>
<td>
10
</td>
</tr>
<tr>
<th>
Mercy Came Running
</th>
<th>
Phillips, Craig &amp; Dean
</th>
<td>
9
</td>
</tr>
<tr>
<th>
Jesus Freak
</th>
<th>
DC Talk
</th>
<td>
8
</td>
</tr>
<tr>
<th>
I Wanna Remember (feat. Carrie Underwood)
</th>
<th>
NEEDTOBREATHE
</th>
<td>
8
</td>
</tr>
<tr>
<th>
…
</th>
<th>
…
</th>
<td>
…
</td>
</tr>
<tr>
<th>
White Christmas
</th>
<th>
Amy Grant
</th>
<td>
2
</td>
</tr>
<tr>
<th>
Simplicity
</th>
<th>
Rend Collective
</th>
<td>
2
</td>
</tr>
<tr>
<th>
Spirit - Listen Louder Album Version
</th>
<th>
Various Artists
</th>
<td>
2
</td>
</tr>
<tr>
<th>
Never Fail - Live
</th>
<th>
Hillsong Young &amp; Free
</th>
<td>
2
</td>
</tr>
<tr>
<th>
He Shall Reign - Live
</th>
<th>
Hillsong Worship
</th>
<td>
2
</td>
</tr>
</tbody>
</table>
<p>
3229 rows × 1 columns
</p>
</div>
<p>Before we find the lyrics to each tracks, we want to remove
duplicates if track name, artist, and released year are the same.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop duplicate if song, artist, released_year are the same</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>df2.drop_duplicates([<span class="st">&#39;name&#39;</span>, <span class="st">&#39;artists_name&#39;</span>, <span class="st">&#39;release_year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<h3 id="get-song-lyrics-from-geniuslyrics">3. Get song lyrics from
GeniusLyrics</h3>
<p>Let’s test our Genius API.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test genius API to get song lyrics</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>title_name <span class="op">=</span> df2.loc[<span class="dv">0</span>, <span class="st">&#39;track_name&#39;</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>artist_name <span class="op">=</span> df2.loc[<span class="dv">0</span>, <span class="st">&#39;artists_name&#39;</span>]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>song <span class="op">=</span> genius.search_song(title<span class="op">=</span>title_name, artist<span class="op">=</span>artist_name)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(song.lyrics)</span></code></pre></div>
<pre><code>Searching for &quot;Cry For The Desert&quot; by Twila Paris...
Done.
Verse I
I will cry for the desert
When He&#39;s bleeding from His heart and soul
Die for the desert
And remove my hands from what I hold

Deeper in my heart I will hear Him call
Deeper in my heart I will give it all
Deeper in my heart

CHORUS

I will cry for the desert
Oh
I will cry for the desert
Oh
I will cry

Verse II
Cry for the desert;
I will tremble and recieve His pain
Die for the desert;
I will pour my life on this terrain

Deeper in my heart I will hear Him call
Deeper in my heart I will give it all
Deeper in my heart
Bridge

The smallest grain of sand
Is held inside my hand
And when I look
I see His face

The smallest grain of sand
Is held inside my hand
And when I look
I see His face

REPEAT VERSE I

REPEAT CHORUSEmbedShare URLCopyEmbedCopy</code></pre>
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df2.shape</span></code></pre></div>
<pre><code>(24167, 33)</code></pre>
<p>We would be using various libraries below for text analysis.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import necessary libraries for text analysis</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.stem <span class="im">import</span> WordNetLemmatizer</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> words</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction <span class="im">import</span> text <span class="im">as</span> sktext</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud, STOPWORDS, ImageColorGenerator</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span></code></pre></div>
<p>We would not consider medley as it will have longer lyrics than
usual. And the lyrics may likely not be retrieved successfully. We will
also exclude non-english songs and songs with multiple artists.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove medley songs</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df2[df2[<span class="st">&#39;name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">&#39;medley&#39;</span> <span class="kw">not</span> <span class="kw">in</span> x.lower())]</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># remove non-english song</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>setofwords <span class="op">=</span> <span class="bu">set</span>(words.words())</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df3[df3[<span class="st">&#39;name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">any</span>([n <span class="kw">in</span> setofwords <span class="cf">for</span> n <span class="kw">in</span> x]))]</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3.shape)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove tracks with multiple artists</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df3[df3[<span class="st">&#39;artists_name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: (<span class="st">&#39;various&#39;</span> <span class="kw">not</span> <span class="kw">in</span> x.lower()) <span class="kw">and</span> (<span class="st">&#39;,&#39;</span> <span class="kw">not</span> <span class="kw">in</span> x.lower()))]</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3.shape)</span></code></pre></div>
<pre><code>(23919, 33)
(22440, 33)</code></pre>
<p>We now have around 22k song tracks.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df3.columns</span></code></pre></div>
<pre><code>Index([&#39;album&#39;, &#39;artists&#39;, &#39;available_markets&#39;, &#39;disc_number&#39;, &#39;duration_ms&#39;,
       &#39;explicit&#39;, &#39;external_ids&#39;, &#39;external_urls&#39;, &#39;href&#39;, &#39;id&#39;, &#39;is_local&#39;,
       &#39;name&#39;, &#39;popularity&#39;, &#39;preview_url&#39;, &#39;track_number&#39;, &#39;type&#39;, &#39;uri&#39;,
       &#39;release_date&#39;, &#39;artists_name&#39;, &#39;track_name&#39;, &#39;release_year&#39;,
       &#39;danceability&#39;, &#39;energy&#39;, &#39;key&#39;, &#39;loudness&#39;, &#39;mode&#39;, &#39;speechiness&#39;,
       &#39;acousticness&#39;, &#39;instrumentalness&#39;, &#39;liveness&#39;, &#39;valence&#39;, &#39;tempo&#39;,
       &#39;time_signature&#39;],
      dtype=&#39;object&#39;)</code></pre>
<p>We will keep album image URL for display later.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save image url for display later</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df3[<span class="st">&#39;image_url&#39;</span>] <span class="op">=</span> df3[<span class="st">&#39;album&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">&#39;images&#39;</span>][<span class="dv">1</span>][<span class="st">&#39;url&#39;</span>])</span></code></pre></div>
<p>To reduce the number of tracks for analysis, we will just take top
150 songs for each year based on popularity.</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 150 songs by popularity for each year</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>df_top <span class="op">=</span> df3.sort_values(<span class="st">&#39;popularity&#39;</span>,ascending <span class="op">=</span> <span class="va">False</span>).groupby(<span class="st">&#39;release_year&#39;</span>)<span class="op">\</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>[<span class="st">&#39;name&#39;</span>, <span class="st">&#39;artists_name&#39;</span>, <span class="st">&#39;image_url&#39;</span>, <span class="st">&#39;release_year&#39;</span>, <span class="st">&#39;duration_ms&#39;</span>, <span class="st">&#39;external_urls&#39;</span>, <span class="st">&#39;popularity&#39;</span>, <span class="st">&#39;danceability&#39;</span>, <span class="st">&#39;energy&#39;</span>, <span class="st">&#39;loudness&#39;</span>, <span class="st">&#39;speechiness&#39;</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;acousticness&#39;</span>, <span class="st">&#39;instrumentalness&#39;</span>, <span class="st">&#39;liveness&#39;</span>, <span class="st">&#39;valence&#39;</span>, <span class="st">&#39;tempo&#39;</span>, <span class="st">&#39;key&#39;</span>, <span class="st">&#39;time_signature&#39;</span>].head(<span class="dv">150</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>df_top.sort_values(<span class="st">&#39;release_year&#39;</span>).head()</span></code></pre></div>
<pre><code>C:\Users\nn\Anaconda3\lib\site-packages\ipykernel_launcher.py:3: FutureWarning: Indexing with multiple keys (implicitly converted to a tuple of keys) will be deprecated, use a list instead.
  This is separate from the ipykernel package so we can avoid doing imports until</code></pre>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
name
</th>
<th>
artists_name
</th>
<th>
image_url
</th>
<th>
release_year
</th>
<th>
duration_ms
</th>
<th>
external_urls
</th>
<th>
popularity
</th>
<th>
danceability
</th>
<th>
energy
</th>
<th>
loudness
</th>
<th>
speechiness
</th>
<th>
acousticness
</th>
<th>
instrumentalness
</th>
<th>
liveness
</th>
<th>
valence
</th>
<th>
tempo
</th>
<th>
key
</th>
<th>
time_signature
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
82
</th>
<td>
Freedom
</td>
<td>
Wayne Watson
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02aea734"
class="uri">https://i.scdn.co/image/ab67616d00001e02aea734</a>…
</td>
<td>
1990
</td>
<td>
304200
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/0G"
class="uri">https://open.spotify.com/track/0G</a>…
</td>
<td>
12
</td>
<td>
0.659
</td>
<td>
0.542
</td>
<td>
-10.487
</td>
<td>
0.0289
</td>
<td>
0.0759
</td>
<td>
0.0
</td>
<td>
0.0524
</td>
<td>
0.840
</td>
<td>
114.576
</td>
<td>
2
</td>
<td>
4
</td>
</tr>
<tr>
<th>
92
</th>
<td>
Storyline - Powerhouse Album Version
</td>
<td>
Whiteheart
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02f117a6"
class="uri">https://i.scdn.co/image/ab67616d00001e02f117a6</a>…
</td>
<td>
1990
</td>
<td>
261686
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/38"
class="uri">https://open.spotify.com/track/38</a>…
</td>
<td>
13
</td>
<td>
0.701
</td>
<td>
0.701
</td>
<td>
-11.453
</td>
<td>
0.0357
</td>
<td>
0.4290
</td>
<td>
0.0
</td>
<td>
0.0520
</td>
<td>
0.485
</td>
<td>
115.926
</td>
<td>
2
</td>
<td>
4
</td>
</tr>
<tr>
<th>
60
</th>
<td>
What Kind Of Joy
</td>
<td>
Steven Curtis Chapman
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02c6ae7e"
class="uri">https://i.scdn.co/image/ab67616d00001e02c6ae7e</a>…
</td>
<td>
1990
</td>
<td>
276466
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/5r"
class="uri">https://open.spotify.com/track/5r</a>…
</td>
<td>
13
</td>
<td>
0.528
</td>
<td>
0.496
</td>
<td>
-13.614
</td>
<td>
0.0326
</td>
<td>
0.3520
</td>
<td>
0.0
</td>
<td>
0.0912
</td>
<td>
0.578
</td>
<td>
157.727
</td>
<td>
2
</td>
<td>
3
</td>
</tr>
<tr>
<th>
90
</th>
<td>
How Majestic Is Your Name
</td>
<td>
Sandi Patty
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e0206a08c"
class="uri">https://i.scdn.co/image/ab67616d00001e0206a08c</a>…
</td>
<td>
1990
</td>
<td>
167307
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/5v"
class="uri">https://open.spotify.com/track/5v</a>…
</td>
<td>
13
</td>
<td>
0.389
</td>
<td>
0.833
</td>
<td>
-9.022
</td>
<td>
0.2500
</td>
<td>
0.5980
</td>
<td>
0.0
</td>
<td>
0.9790
</td>
<td>
0.832
</td>
<td>
175.964
</td>
<td>
2
</td>
<td>
4
</td>
</tr>
<tr>
<th>
73
</th>
<td>
Undivided Heart - Cry For The Desert Album Ver…
</td>
<td>
Twila Paris
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02c860b3"
class="uri">https://i.scdn.co/image/ab67616d00001e02c860b3</a>…
</td>
<td>
1990
</td>
<td>
290133
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3v"
class="uri">https://open.spotify.com/track/3v</a>…
</td>
<td>
13
</td>
<td>
0.551
</td>
<td>
0.862
</td>
<td>
-4.822
</td>
<td>
0.0472
</td>
<td>
0.3630
</td>
<td>
0.0
</td>
<td>
0.7440
</td>
<td>
0.389
</td>
<td>
105.848
</td>
<td>
7
</td>
<td>
4
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove extra info from song title i.e. &#39;-&#39; and &#39;()&#39;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>df_top.rename(columns<span class="op">=</span>{<span class="st">&#39;name&#39;</span>:<span class="st">&#39;original_name&#39;</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;name&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;original_name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.split(<span class="st">&#39;-&#39;</span>)[<span class="dv">0</span>])</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;name&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.split(<span class="st">&#39;(&#39;</span>)[<span class="dv">0</span>].strip())</span></code></pre></div>
<p>Next we create helper function to retrieve the lyrics.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create helper function to retrieve lyrics</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_lyrics(title, artist):</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>            song <span class="op">=</span> genius.search_song(title<span class="op">=</span>title, artist<span class="op">=</span>artist)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> song:</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> song.lyrics</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span>    </span></code></pre></div>
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the lyrics of the songs</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;lyrics&#39;</span>] <span class="op">=</span> df_top.<span class="bu">apply</span>(<span class="kw">lambda</span> x: get_lyrics(x[<span class="st">&#39;name&#39;</span>], x[<span class="st">&#39;artists_name&#39;</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>Searching for &quot;Monster&quot; by Skillet...
Done.
Searching for &quot;You Say&quot; by Lauren Daigle...
Done.
Searching for &quot;Feel Invincible&quot; by Skillet...
Done.
Searching for &quot;Hero&quot; by Skillet...
Done.
Searching for &quot;The Resistance&quot; by Skillet...
Done.
Searching for &quot;Reckless Love&quot; by Cory Asbury...
Done.
Searching for &quot;Rescue&quot; by Lauren Daigle...
Done.
Searching for &quot;Awake and Alive&quot; by Skillet...
Done.
Searching for &quot;Comatose&quot; by Skillet...
Done.
Searching for &quot;Oceans&quot; by Hillsong UNITED...
Done.
Searching for &quot;O Come to the Altar&quot; by Elevation Worship...
Done.
Searching for &quot;Nobody&quot; by Casting Crowns...
Done.
Searching for &quot;Not Gonna Die&quot; by Skillet...
Done.
Searching for &quot;Little Drummer Boy&quot; by for KING &amp; COUNTRY...
Done.
Searching for &quot;Good Good Father&quot; by Chris Tomlin...
Done.
Searching for &quot;Way Maker&quot; by Leeland...
Done.
Searching for &quot;Jireh&quot; by Elevation Worship...
Done.
Searching for &quot;10,000 Reasons&quot; by Matt Redman...
Done.
Searching for &quot;Do It Again&quot; by Elevation Worship...
Done.
Searching for &quot;I Can Only Imagine&quot; by MercyMe...
Done.
Searching for &quot;Whispers in the Dark&quot; by Skillet...
Done.
Searching for &quot;What A Beautiful Name&quot; by Hillsong Worship...
Done.
Searching for &quot;Trust in You&quot; by Lauren Daigle...
Done.
Searching for &quot;Tributary&quot; by Twila Paris...
Specified song does not contain lyrics. Rejecting.
Searching for &quot;Everywhere I Look&quot; by Phil Keaggy...
Done.
..........and more..........</code></pre>
<p>Again, save the dataframe as pickle file.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save dataframe with lyrics as pickle for easy retrieval next time</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;df_top_lyrics.pickle&#39;</span>, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    pickle.dump(df_top, f, pickle.HIGHEST_PROTOCOL)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;df_top_lyrics.pickle&#39;</span>, <span class="st">&#39;rb&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    df_top <span class="op">=</span> pickle.load(f)</span></code></pre></div>
<p>Only 0.85% of tracks in our list has no lyrics.</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check how many song with missing lyrics</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">&#39;% missing lyrics: {:.2f}%&#39;</span>.<span class="bu">format</span>(<span class="bu">sum</span>(df_top[<span class="st">&#39;lyrics&#39;</span>].isnull())<span class="op">*</span><span class="dv">100</span><span class="op">/</span>df_top.shape[<span class="dv">0</span>])</span></code></pre></div>
<pre><code>&#39;% missing lyrics: 0.85%&#39;</code></pre>
<p>Let’s look further and try to retrieve the lyrics for them.</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_top[df_top[<span class="st">&#39;lyrics&#39;</span>].isnull()][[<span class="st">&#39;name&#39;</span>,<span class="st">&#39;artists_name&#39;</span>]]</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
name
</th>
<th>
artists_name
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
23571
</th>
<td>
Graves Into Gardens
</td>
<td>
Elevation Worship
</td>
</tr>
<tr>
<th>
23588
</th>
<td>
Graves Into Gardens
</td>
<td>
Elevation Worship
</td>
</tr>
<tr>
<th>
24661
</th>
<td>
Winter Wonderland
</td>
<td>
Sarah Reeves
</td>
</tr>
<tr>
<th>
18640
</th>
<td>
Joy to the World/Our God Saves
</td>
<td>
Paul Baloche
</td>
</tr>
<tr>
<th>
16684
</th>
<td>
El Dios que Adoramos
</td>
<td>
Sovereign Grace Music
</td>
</tr>
<tr>
<th>
11601
</th>
<td>
So Good To Me
</td>
<td>
Matt Gilman &amp; Cory Asbury
</td>
</tr>
<tr>
<th>
20761
</th>
<td>
As The Deer
</td>
<td>
David Phelps
</td>
</tr>
<tr>
<th>
19990
</th>
<td>
Ven Aquí
</td>
<td>
Planetshakers
</td>
</tr>
<tr>
<th>
16870
</th>
<td>
Un Siervo para Tu Gloria
</td>
<td>
Sovereign Grace Music
</td>
</tr>
<tr>
<th>
17689
</th>
<td>
O Come, O Come, Emmanuel
</td>
<td>
Kim Walker-Smith
</td>
</tr>
<tr>
<th>
5595
</th>
<td>
In The Belly Of A Whale
</td>
<td>
VeggieTales
</td>
</tr>
<tr>
<th>
16912
</th>
<td>
Más Grande de lo que Imagino
</td>
<td>
Sovereign Grace Music
</td>
</tr>
<tr>
<th>
15702
</th>
<td>
The Perfect Wisdom Of Our God
</td>
<td>
Keith &amp; Kristyn Getty
</td>
</tr>
<tr>
<th>
2606
</th>
<td>
O Christmas Tree
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
9649
</th>
<td>
Great Is Thy Faithfulness
</td>
<td>
Fernando Ortega
</td>
</tr>
<tr>
<th>
11669
</th>
<td>
Come, Thou Long Expected Jesus
</td>
<td>
Fernando Ortega
</td>
</tr>
<tr>
<th>
9693
</th>
<td>
The LarryBoy Theme Song
</td>
<td>
VeggieTales
</td>
</tr>
<tr>
<th>
3920
</th>
<td>
It Is Well With My Soul
</td>
<td>
4Him
</td>
</tr>
<tr>
<th>
3938
</th>
<td>
Freedom
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
10701
</th>
<td>
The Gift Of St.Cecilia
</td>
<td>
Jars Of Clay
</td>
</tr>
<tr>
<th>
3950
</th>
<td>
Thy Word
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
7680
</th>
<td>
I Could Sing Of Your Love Forever/God’s Romance
</td>
<td>
Hillsong Worship
</td>
</tr>
<tr>
<th>
2136
</th>
<td>
The Little Drummer Boy
</td>
<td>
4Him
</td>
</tr>
<tr>
<th>
3959
</th>
<td>
Hibernia
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
3175
</th>
<td>
Next Five Minutes
</td>
<td>
Steven Curtis Chapman
</td>
</tr>
<tr>
<th>
3987
</th>
<td>
The Call
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
3980
</th>
<td>
Free Man
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
4677
</th>
<td>
Rockin’ Around The Christmas Tree
</td>
<td>
Newsong
</td>
</tr>
<tr>
<th>
5757
</th>
<td>
Trading My Sorrows
</td>
<td>
The Katinas
</td>
</tr>
<tr>
<th>
3179
</th>
<td>
Coventry Carol
</td>
<td>
Phil Keaggy
</td>
</tr>
<tr>
<th>
1475
</th>
<td>
Debes Vivir Dentro de Mir
</td>
<td>
Bryan Duncan
</td>
</tr>
<tr>
<th>
105
</th>
<td>
Shaalu Shalom Yerushalayim
</td>
<td>
Maranatha! Music
</td>
</tr>
<tr>
<th>
104
</th>
<td>
Baruch Hashem Adonai
</td>
<td>
Maranatha! Music
</td>
</tr>
<tr>
<th>
101
</th>
<td>
Baruch Ha Ba
</td>
<td>
Maranatha! Music
</td>
</tr>
<tr>
<th>
1906
</th>
<td>
Stomp
</td>
<td>
Phil Keaggy
</td>
</tr>
<tr>
<th>
1498
</th>
<td>
Freedom
</td>
<td>
Michael W. Smith
</td>
</tr>
<tr>
<th>
108
</th>
<td>
Tributary
</td>
<td>
Twila Paris
</td>
</tr>
<tr>
<th>
838
</th>
<td>
U7 AKA My Scum Sweetheart
</td>
<td>
Audio Adrenaline
</td>
</tr>
<tr>
<th>
142
</th>
<td>
Banay Y’ Rush Alayim
</td>
<td>
Maranatha! Music
</td>
</tr>
<tr>
<th>
162
</th>
<td>
Dancing In Jerusalem
</td>
<td>
Maranatha! Music
</td>
</tr>
<tr>
<th>
329
</th>
<td>
Ele E Exaltado
</td>
<td>
Twila Paris
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check for missing lyrics</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>idx_missing <span class="op">=</span> df_top.index[df_top[<span class="st">&#39;lyrics&#39;</span>].isnull()]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>idx_missing</span></code></pre></div>
<pre><code>Int64Index([23571, 23588, 24661, 18640, 16684, 11601, 20761, 19990, 16870,
            17689,  5595, 16912, 15702,  2606,  9649, 11669,  9693,  3920,
             3938, 10701,  3950,  7680,  2136,  3959,  3175,  3987,  3980,
             4677,  5757,  3179,  1475,   105,   104,   101,  1906,  1498,
              108,   838,   142,   162,   329],
           dtype=&#39;int64&#39;)</code></pre>
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get lyrics based on song name without artist name for those missing</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>df_top.loc[idx_missing,<span class="st">&#39;lyrics&#39;</span>] <span class="op">=</span> df_top.loc[idx_missing,<span class="st">&#39;name&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:  get_lyrics(x, <span class="st">&#39;&#39;</span>))</span></code></pre></div>
<pre><code>Searching for &quot;Graves Into Gardens&quot;...
Done.
Searching for &quot;Graves Into Gardens&quot;...
Done.
Searching for &quot;Winter Wonderland&quot;...
Done.
Searching for &quot;Joy to the World/Our God Saves&quot;...
Done.
Searching for &quot;El Dios que Adoramos&quot;...
Done.
Searching for &quot;So Good To Me&quot;...
Done.
Searching for &quot;As The Deer&quot;...
Done.
Searching for &quot;Ven Aquí&quot;...
Done.
Searching for &quot;Un Siervo para Tu Gloria&quot;...
Done.
Searching for &quot;O Come, O Come, Emmanuel&quot;...
Done.
Searching for &quot;In The Belly Of A Whale&quot;...
Done.
Searching for &quot;Más Grande de lo que Imagino&quot;...
Done.
Searching for &quot;The Perfect Wisdom Of Our God&quot;...
Done.
Searching for &quot;O Christmas Tree&quot;...
Done.
Searching for &quot;Great Is Thy Faithfulness&quot;...
Done.
Searching for &quot;Come, Thou Long Expected Jesus&quot;...
Done.
Searching for &quot;The LarryBoy Theme Song&quot;...
Done.
Searching for &quot;It Is Well With My Soul&quot;...
Done.
Searching for &quot;Freedom&quot;...
Done.
Searching for &quot;The Gift Of St.Cecilia&quot;...
Done.
Searching for &quot;Thy Word&quot;...
Done.
Searching for &quot;I Could Sing Of Your Love Forever/God&#39;s Romance&quot;...
Done.
Searching for &quot;The Little Drummer Boy&quot;...
Done.
Searching for &quot;Hibernia&quot;...
Done.
Searching for &quot;Next Five Minutes&quot;...
Done.
Searching for &quot;The Call&quot;...
Done.
Searching for &quot;Free Man&quot;...
Done.
Searching for &quot;Rockin&#39; Around The Christmas Tree&quot;...
Done.
Searching for &quot;Trading My Sorrows&quot;...
Done.
Searching for &quot;Coventry Carol&quot;...
Done.
Searching for &quot;Debes Vivir Dentro de Mir&quot;...
Done.
Searching for &quot;Shaalu Shalom Yerushalayim&quot;...
No results found for: &#39;Shaalu Shalom Yerushalayim&#39;
Searching for &quot;Baruch Hashem Adonai&quot;...
Done.
..........and more..........</code></pre>
<p>Now only 0.06% of tracks are without lyrics. We will just exclude
them.</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check again % of song with missing lyrics</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">&#39;% missing lyrics: {:.2f}%&#39;</span>.<span class="bu">format</span>(<span class="bu">sum</span>(df_top[<span class="st">&#39;lyrics&#39;</span>].isnull())<span class="op">*</span><span class="dv">100</span><span class="op">/</span>df_top.shape[<span class="dv">0</span>])</span></code></pre></div>
<pre><code>&#39;% missing lyrics: 0.06%&#39;</code></pre>
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop those songs without lyrics</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>idx_missing <span class="op">=</span> df_top.index[df_top[<span class="st">&#39;lyrics&#39;</span>].isnull()]</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>df_top.drop(index<span class="op">=</span>idx_missing, inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<h3 id="analyse-lyrics-using-nltk-and-sklearn">4. Analyse lyrics using
nltk and sklearn</h3>
<p>It’s time to analyse our lyrics.</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add this term as stop words</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>stop_words <span class="op">=</span> sktext.ENGLISH_STOP_WORDS.union([<span class="st">&#39;urlcopyembedcopy&#39;</span>])</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for lemmatisation</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>wnl <span class="op">=</span> WordNetLemmatizer()</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># helper function to tokenise lyrics</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lyric_tokenize(text):</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.split(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove verse, chorus indicator</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [t <span class="cf">for</span> t <span class="kw">in</span> text <span class="cf">if</span> (<span class="st">&#39;chorus&#39;</span> <span class="kw">not</span> <span class="kw">in</span> t.lower()) <span class="op">&amp;</span> (<span class="st">&#39;verse&#39;</span> <span class="kw">not</span> <span class="kw">in</span> t.lower()) <span class="op">&amp;</span> </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>            (<span class="st">&#39;refrain&#39;</span> <span class="kw">not</span> <span class="kw">in</span> t.lower()) <span class="op">&amp;</span> (<span class="st">&#39;intro&#39;</span> <span class="kw">not</span> <span class="kw">in</span> t.lower()) <span class="op">&amp;</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>            (<span class="st">&#39;outro&#39;</span> <span class="kw">not</span> <span class="kw">in</span> t.lower()) <span class="op">&amp;</span> (t.lower() <span class="op">!=</span> <span class="st">&#39;bridge&#39;</span>) <span class="op">&amp;</span> (<span class="bu">len</span>(t)<span class="op">&gt;</span><span class="dv">1</span>)]</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove word in parentheses</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [re.sub(<span class="vs">r&#39;\((repeat|bridge|verse|chorus)\)&#39;</span>, <span class="st">&#39;&#39;</span>, t.lower()) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#replace hyphen with space</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [re.sub(<span class="vs">r&#39;-&#39;</span>, <span class="st">&#39; &#39;</span>, t.lower()) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove &#39;embedshare&#39;</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [re.sub(<span class="vs">r&#39;(embedshare|urlcopyembedcopy)&#39;</span>, <span class="st">&#39;&#39;</span>, t.lower()) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [re.sub(<span class="vs">r&#39;\&#39;\w*&#39;</span>, <span class="st">&#39;&#39;</span>, t.lower()) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#sub multi space with 1 space</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> [re.sub(<span class="vs">r&#39;\s{2,}&#39;</span>, <span class="st">&#39; &#39;</span>, t.lower()) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#tokenize lyrics</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    tokenizer <span class="op">=</span> RegexpTokenizer(<span class="vs">r&quot;[a-zA-Z]{2,}&quot;</span>)</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> [tokenizer.tokenize(t) <span class="cf">for</span> t <span class="kw">in</span> text]</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> [item <span class="cf">for</span> sublist <span class="kw">in</span> token <span class="cf">for</span> item <span class="kw">in</span> sublist <span class="cf">if</span> item <span class="kw">not</span> <span class="kw">in</span> stop_words]</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> [wnl.lemmatize(word) <span class="cf">for</span> word <span class="kw">in</span> token]</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> token</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenise lyrics</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;tokens&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;lyrics&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: lyric_tokenize(x) <span class="cf">if</span> pd.notnull(x) <span class="cf">else</span> <span class="st">&#39;NA&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check distribution of lyrics length</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;length_tokens&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;length_tokens&#39;</span>].hist(bins<span class="op">=</span><span class="dv">50</span>)</span></code></pre></div>
<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x22161b9e550&gt;</code></pre>
<p><img src="output_40_1.png" /></p>
<p>We will exclude songs with 0 token. It is also observed that some
non-english song still contains english word which pass through our
filter earlier. Let’s define english song as song with &gt;80% english
word in the lyrics.</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove song with 0 tokens</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>df_top.drop(index<span class="op">=</span>df_top.index[df_top[<span class="st">&#39;length_tokens&#39;</span>]<span class="op">==</span><span class="dv">0</span>], inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<div class="sourceCode" id="cb52"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove non-english song (defined english song as song with &gt;80% english word)</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>df_top <span class="op">=</span> df_top[df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> token: (<span class="bu">sum</span>([n <span class="kw">in</span> setofwords <span class="cf">for</span> n <span class="kw">in</span> token])<span class="op">/</span><span class="bu">len</span>(token)) <span class="op">&gt;</span> <span class="fl">0.8</span> )]</span></code></pre></div>
<div class="sourceCode" id="cb53"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort song based on token length</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>df_sorted <span class="op">=</span> df_top[<span class="st">&#39;length_tokens&#39;</span>].sort_values().reset_index()</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>df_sorted[<span class="st">&#39;pct_rank&#39;</span>] <span class="op">=</span> df_sorted[<span class="st">&#39;length_tokens&#39;</span>].rank(pct<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>df_sorted</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>Some songs have very short token length. Let<span class="st">&#39;s look at them.</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="er"># look at song with short token length (&lt;1 percentile)</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="er">for i in df_sorted.loc[df_sorted[&#39;pct_rank&#39;] &lt; 0.01, &#39;index&#39;]:</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="er">    print(&#39;==&#39;, df_top.loc[i,&#39;name&#39;], &#39;-&#39;, df_top.loc[i,&#39;artists_name&#39;], &#39;==&#39;)</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="er">    print(df_top.loc[i,&#39;tokens&#39;])</span></span></code></pre></div>
<pre><code>== Our God Reigns - Jesus Culture ==
[&#39;god&#39;, &#39;reign&#39;, &#39;god&#39;, &#39;reign&#39;, &#39;forever&#39;, &#39;kingdom&#39;, &#39;reign&#39;]
== Highland Cathedral - Amy Grant ==
[&#39;amy&#39;, &#39;grant&#39;, &#39;christmas&#39;, &#39;remember&#39;, &#39;highland&#39;, &#39;cathedral&#39;, &#39;instrumental&#39;]
== Kick - Relient K ==
[&#39;oh&#39;, &#39;kick&#39;, &#39;hope&#39;, &#39;sick&#39;, &#39;relient&#39;, &#39;song&#39;, &#39;play&#39;, &#39;want&#39;, &#39;throw&#39;, &#39;cd&#39;, &#39;away&#39;]
== The Anthem - Planetshakers ==
[&#39;hallelujah&#39;, &#39;won&#39;, &#39;victory&#39;, &#39;hallelujah&#39;, &#39;won&#39;, &#39;death&#39;, &#39;hold&#39;, &#39;risen&#39;, &#39;king&#39;, &#39;seated&#39;, &#39;majesty&#39;, &#39;risen&#39;, &#39;king&#39;]
== The Anthem - Planetshakers ==
[&#39;hallelujah&#39;, &#39;won&#39;, &#39;victory&#39;, &#39;hallelujah&#39;, &#39;won&#39;, &#39;death&#39;, &#39;hold&#39;, &#39;risen&#39;, &#39;king&#39;, &#39;seated&#39;, &#39;majesty&#39;, &#39;risen&#39;, &#39;king&#39;]
== Radio Daze - Petra ==
[&#39;love&#39;, &#39;world&#39;, &#39;don&#39;, &#39;let&#39;, &#39;heart&#39;, &#39;hardened&#39;, &#39;father&#39;, &#39;bother&#39;, &#39;coloring&#39;, &#39;song&#39;, &#39;thankful&#39;, &#39;heart&#39;, &#39;power&#39;, &#39;ya&#39;]
== I Will Exalt You - Hillsong Worship ==
[&#39;exalt&#39;, &#39;exalt&#39;, &#39;exalt&#39;, &#39;god&#39;, &#39;hiding&#39;, &#39;place&#39;, &#39;safe&#39;, &#39;refuge&#39;, &#39;treasure&#39;, &#39;lord&#39;, &#39;friend&#39;, &#39;king&#39;, &#39;anointed&#39;, &#39;holy&#39;, &#39;fear&#39;]
== My Soul Longs For You - Jesus Culture ==
[&#39;soul&#39;, &#39;longs&#39;, &#39;soul&#39;, &#39;longs&#39;, &#39;believe&#39;, &#39;come&#39;, &#39;like&#39;, &#39;rain&#39;, &#39;come&#39;, &#39;like&#39;, &#39;rain&#39;, &#39;let&#39;, &#39;rain&#39;, &#39;let&#39;, &#39;rain&#39;]
== Faithful One - Brian Doerksen ==
[&#39;faithful&#39;, &#39;unchanging&#39;, &#39;ageless&#39;, &#39;rock&#39;, &#39;peace&#39;, &#39;lord&#39;, &#39;depend&#39;, &#39;rock&#39;, &#39;time&#39;, &#39;trouble&#39;, &#39;lift&#39;, &#39;fall&#39;, &#39;storm&#39;, &#39;love&#39;, &#39;anchor&#39;, &#39;hope&#39;]
== Amazed - Desperation Band ==
[&#39;dance&#39;, &#39;unaware&#39;, &#39;sing&#39;, &#39;hear&#39;, &#39;sound&#39;, &#39;lord&#39;, &#39;amazed&#39;, &#39;lord&#39;, &#39;amazed&#39;, &#39;lord&#39;, &#39;amazed&#39;, &#39;love&#39;, &#39;wide&#39;, &#39;deep&#39;, &#39;great&#39;, &#39;love&#39;]
== I Give You My Heart - The Katinas ==
[&#39;desire&#39;, &#39;honor&#39;, &#39;lord&#39;, &#39;heart&#39;, &#39;worship&#39;, &#39;praise&#39;, &#39;adore&#39;, &#39;lord&#39;, &#39;heart&#39;, &#39;soul&#39;, &#39;live&#39;, &#39;breath&#39;, &#39;moment&#39;, &#39;awake&#39;, &#39;lord&#39;, &#39;way&#39;]
== Draw Me Close - Maranatha! Music ==
[&#39;jesus&#39;, &#39;draw&#39;, &#39;close&#39;, &#39;closer&#39;, &#39;lord&#39;, &#39;let&#39;, &#39;world&#39;, &#39;fade&#39;, &#39;away&#39;, &#39;jesus&#39;, &#39;draw&#39;, &#39;close&#39;, &#39;closer&#39;, &#39;lord&#39;, &#39;desire&#39;, &#39;worship&#39;, &#39;obey&#39;]
== Come Away - Jesus Culture ==
[&#39;come&#39;, &#39;away&#39;, &#39;come&#39;, &#39;away&#39;, &#39;late&#39;, &#39;late&#39;, &#39;late&#39;, &#39;plan&#39;, &#39;plan&#39;, &#39;gonna&#39;, &#39;wild&#39;, &#39;gonna&#39;, &#39;great&#39;, &#39;gonna&#39;, &#39;open&#39;, &#39;heart&#39;, &#39;let&#39;]
== Lullaby - JJ Heller ==
[&#39;sleep&#39;, &#39;little&#39;, &#39;peaceful&#39;, &#39;dream&#39;, &#39;lovely&#39;, &#39;thing&#39;, &#39;awake&#39;, &#39;real&#39;, &#39;little&#39;, &#39;close&#39;, &#39;eye&#39;, &#39;little&#39;, &#39;lullaby&#39;, &#39;love&#39;, &#39;god&#39;, &#39;evident&#39;, &#39;miracle&#39;, &#39;little&#39;]
== 10,000 Reasons - Matt Redman ==
[&#39;reason&#39;, &#39;heart&#39;, &#39;sing&#39;, &#39;bless&#39;, &#39;lord&#39;, &#39;soul&#39;, &#39;soul&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;sing&#39;, &#39;like&#39;, &#39;soul&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;worship&#39;, &#39;holy&#39;]
== 10,000 Reasons - Matt Redman ==
[&#39;reason&#39;, &#39;heart&#39;, &#39;sing&#39;, &#39;bless&#39;, &#39;lord&#39;, &#39;soul&#39;, &#39;soul&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;sing&#39;, &#39;like&#39;, &#39;soul&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;worship&#39;, &#39;holy&#39;, &#39;worship&#39;, &#39;holy&#39;]
== There Is No Other Name - Robin Mark ==
[&#39;man&#39;, &#39;saved&#39;, &#39;heaven&#39;, &#39;rest&#39;, &#39;soul&#39;, &#39;wounded&#39;, &#39;captive&#39;, &#39;set&#39;, &#39;free&#39;, &#39;forgiven&#39;, &#39;love&#39;, &#39;known&#39;, &#39;grace&#39;, &#39;flowed&#39;, &#39;unrighteousness&#39;, &#39;heart&#39;, &#39;soul&#39;, &#39;tongue&#39;, &#39;confess&#39;]
== Doxology - Passion ==
[&#39;praise&#39;, &#39;god&#39;, &#39;blessing&#39;, &#39;flow&#39;, &#39;praise&#39;, &#39;creature&#39;, &#39;praise&#39;, &#39;ye&#39;, &#39;heavenly&#39;, &#39;host&#39;, &#39;praise&#39;, &#39;father&#39;, &#39;son&#39;, &#39;holy&#39;, &#39;ghost&#39;, &#39;amen&#39;, &#39;amen&#39;, &#39;amen&#39;, &#39;amen&#39;]
== All Consuming Fire - Jesus Culture ==
[&#39;consuming&#39;, &#39;heart&#39;, &#39;desire&#39;, &#39;living&#39;, &#39;flame&#39;, &#39;love&#39;, &#39;come&#39;, &#39;baptize&#39;, &#39;let&#39;, &#39;fall&#39;, &#39;love&#39;, &#39;wanna&#39;, &#39;know&#39;, &#39;high&#39;, &#39;deep&#39;, &#39;wide&#39;, &#39;love&#39;, &#39;love&#39;, &#39;love&#39;]
== Through It All - Hillsong Worship ==
[&#39;forever&#39;, &#39;life&#39;, &#39;season&#39;, &#39;cover&#39;, &#39;hand&#39;, &#39;lead&#39;, &#39;righteousness&#39;, &#39;look&#39;, &#39;wait&#39;, &#39;sing&#39;, &#39;lord&#39;, &#39;hymn&#39;, &#39;love&#39;, &#39;faithfulness&#39;, &#39;carried&#39;, &#39;everlasting&#39;, &#39;arm&#39;, &#39;let&#39;, &#39;hallelujah&#39;, &#39;hallelujah&#39;]
== Fall In This Place - Planetshakers ==
[&#39;place&#39;, &#39;lord&#39;, &#39;longing&#39;, &#39;presence&#39;, &#39;know&#39;, &#39;calling&#39;, &#39;stand&#39;, &#39;long&#39;, &#39;embrace&#39;, &#39;place&#39;, &#39;come&#39;, &#39;holy&#39;, &#39;spirit&#39;, &#39;fall&#39;, &#39;place&#39;, &#39;need&#39;, &#39;power&#39;, &#39;spirit&#39;, &#39;lord&#39;, &#39;cry&#39;]
== As The Deer - Bryan Duncan ==
[&#39;deer&#39;, &#39;panteth&#39;, &#39;water&#39;, &#39;soul&#39;, &#39;longeth&#39;, &#39;thee&#39;, &#39;heart&#39;, &#39;desire&#39;, &#39;long&#39;, &#39;worship&#39;, &#39;thee&#39;, &#39;strength&#39;, &#39;shield&#39;, &#39;spirit&#39;, &#39;yield&#39;, &#39;heart&#39;, &#39;desire&#39;, &#39;long&#39;, &#39;worship&#39;, &#39;thee&#39;]
== You Are Good - Planetshakers ==
[&#39;god&#39;, &#39;place&#39;, &#39;life&#39;, &#39;holding&#39;, &#39;plan&#39;, &#39;life&#39;, &#39;come&#39;, &#39;control&#39;, &#39;cause&#39;, &#39;good&#39;, &#39;good&#39;, &#39;time&#39;, &#39;love&#39;, &#39;endures&#39;, &#39;forever&#39;, &#39;good&#39;, &#39;time&#39;, &#39;good&#39;, &#39;like&#39;, &#39;jesus&#39;]
== Come Thou Fount - Jadon Lavik ==
[&#39;come&#39;, &#39;thou&#39;, &#39;fount&#39;, &#39;blessing&#39;, &#39;oh&#39;, &#39;grace&#39;, &#39;greater&#39;, &#39;debtor&#39;, &#39;prone&#39;, &#39;wander&#39;, &#39;lord&#39;, &#39;feel&#39;, &#39;prone&#39;, &#39;leave&#39;, &#39;god&#39;, &#39;love&#39;, &#39;heart&#39;, &#39;lord&#39;, &#39;seal&#39;, &#39;seal&#39;, &#39;thy&#39;, &#39;court&#39;]
== I Will Wait - Twila Paris ==
[&#39;wait&#39;, &#39;lord&#39;, &#39;wait&#39;, &#39;word&#39;, &#39;fear&#39;, &#39;holy&#39;, &#39;wait&#39;, &#39;wait&#39;, &#39;wait&#39;, &#39;lord&#39;, &#39;wait&#39;, &#39;word&#39;, &#39;speak&#39;, &#39;perfect&#39;, &#39;wisdom&#39;, &#39;seek&#39;, &#39;wait&#39;, &#39;long&#39;, &#39;take&#39;, &#39;wait&#39;, &#39;lord&#39;, &#39;wait&#39;, &#39;lord&#39;]
== Come Holy Spirit - Planetshakers ==
[&#39;come&#39;, &#39;holy&#39;, &#39;spirit&#39;, &#39;fall&#39;, &#39;afresh&#39;, &#39;power&#39;, &#39;satisfy&#39;, &#39;need&#39;, &#39;make&#39;, &#39;strength&#39;, &#39;make&#39;, &#39;grow&#39;, &#39;come&#39;, &#39;holy&#39;, &#39;spirit&#39;, &#39;fall&#39;, &#39;afresh&#39;, &#39;pour&#39;, &#39;lord&#39;, &#39;pour&#39;, &#39;lord&#39;, &#39;pour&#39;, &#39;spirit&#39;]
== For All You&#39;ve Done - Hillsong Worship ==
[&#39;saviour&#39;, &#39;redeemer&#39;, &#39;lifted&#39;, &#39;miry&#39;, &#39;clay&#39;, &#39;almighty&#39;, &#39;forever&#39;, &#39;came&#39;, &#39;near&#39;, &#39;everlasting&#39;, &#39;world&#39;, &#39;live&#39;, &#39;father&#39;, &#39;son&#39;, &#39;lived&#39;, &#39;died&#39;, &#39;rose&#39;, &#39;high&#39;, &#39;opened&#39;, &#39;way&#39;, &#39;world&#39;, &#39;live&#39;, &#39;hallelujah&#39;]
== I Need Words - David Crowder Band ==
[&#39;need&#39;, &#39;word&#39;, &#39;wide&#39;, &#39;sky&#39;, &#39;need&#39;, &#39;language&#39;, &#39;large&#39;, &#39;longing&#39;, &#39;inside&#39;, &#39;need&#39;, &#39;voice&#39;, &#39;bigger&#39;, &#39;need&#39;, &#39;song&#39;, &#39;sing&#39;, &#39;need&#39;, &#39;oh&#39;, &#39;need&#39;, &#39;need&#39;, &#39;oh&#39;, &#39;need&#39;, &#39;hear&#39;, &#39;hear&#39;]
== Take My Life and Let It Be - Bryan Duncan ==
[&#39;life&#39;, &#39;let&#39;, &#39;consecrated&#39;, &#39;lord&#39;, &#39;thee&#39;, &#39;hand&#39;, &#39;let&#39;, &#39;impulse&#39;, &#39;thy&#39;, &#39;love&#39;, &#39;impulse&#39;, &#39;thy&#39;, &#39;love&#39;, &#39;love&#39;, &#39;god&#39;, &#39;pour&#39;, &#39;thy&#39;, &#39;foot&#39;, &#39;treasure&#39;, &#39;store&#39;, &#39;life&#39;, &#39;thee&#39;, &#39;thee&#39;]
== Take My Life And Let It Be - Bryan Duncan ==
[&#39;life&#39;, &#39;let&#39;, &#39;consecrated&#39;, &#39;lord&#39;, &#39;thee&#39;, &#39;hand&#39;, &#39;let&#39;, &#39;impulse&#39;, &#39;thy&#39;, &#39;love&#39;, &#39;impulse&#39;, &#39;thy&#39;, &#39;love&#39;, &#39;love&#39;, &#39;god&#39;, &#39;pour&#39;, &#39;thy&#39;, &#39;foot&#39;, &#39;treasure&#39;, &#39;store&#39;, &#39;life&#39;, &#39;thee&#39;, &#39;thee&#39;]
== You&#39;re Worthy Of My Praise - Passion ==
[&#39;worship&#39;, &#39;heart&#39;, &#39;praise&#39;, &#39;strength&#39;, &#39;seek&#39;, &#39;day&#39;, &#39;follow&#39;, &#39;way&#39;, &#39;worship&#39;, &#39;praise&#39;, &#39;long&#39;, &#39;worship&#39;, &#39;worthy&#39;, &#39;praise&#39;, &#39;bow&#39;, &#39;hail&#39;, &#39;king&#39;, &#39;serve&#39;, &#39;lift&#39;, &#39;eye&#39;, &#39;throne&#39;, &#39;trust&#39;, &#39;trust&#39;]
== Taste And See - Newsboys ==
[&#39;taste&#39;, &#39;lord&#39;, &#39;good&#39;, &#39;taste&#39;, &#39;good&#39;, &#39;light&#39;, &#39;bring&#39;, &#39;harvest&#39;, &#39;good&#39;, &#39;plenty&#39;, &#39;don&#39;, &#39;believe&#39;, &#39;life&#39;, &#39;don&#39;, &#39;let&#39;, &#39;taken&#39;, &#39;foolish&#39;, &#39;word&#39;, &#39;men&#39;, &#39;say&#39;, &#39;god&#39;, &#39;tasteless&#39;, &#39;tasted&#39;]
== Jesus Lover Of My Soul - Hillsong UNITED ==
[&#39;jesus&#39;, &#39;lover&#39;, &#39;soul&#39;, &#39;jesus&#39;, &#39;let&#39;, &#39;youve&#39;, &#39;taken&#39;, &#39;miry&#39;, &#39;clay&#39;, &#39;set&#39;, &#39;foot&#39;, &#39;rock&#39;, &#39;know&#39;, &#39;love&#39;, &#39;need&#39;, &#39;world&#39;, &#39;fall&#39;, &#39;let&#39;, &#39;saviour&#39;, &#39;closest&#39;, &#39;friend&#39;, &#39;worship&#39;, &#39;end&#39;]
== One Desire - Hillsong Worship ==
[&#39;gave&#39;, &#39;soul&#39;, &#39;desire&#39;, &#39;devoted&#39;, &#39;fail&#39;, &#39;love&#39;, &#39;rescued&#39;, &#39;devoted&#39;, &#39;oh&#39;, &#39;moved&#39;, &#39;lord&#39;, &#39;way&#39;, &#39;cause&#39;, &#39;lord&#39;, &#39;just&#39;, &#39;thing&#39;, &#39;seek&#39;, &#39;desire&#39;, &#39;lord&#39;, &#39;forever&#39;, &#39;song&#39;, &#39;desire&#39;, &#39;jesus&#39;]
== Breathe - Rebecca St. James ==
[&#39;air&#39;, &#39;breathe&#39;, &#39;air&#39;, &#39;breathe&#39;, &#39;holy&#39;, &#39;presence&#39;, &#39;living&#39;, &#39;daily&#39;, &#39;bread&#39;, &#39;daily&#39;, &#39;bread&#39;, &#39;word&#39;, &#39;spoken&#39;, &#39;desperate&#39;, &#39;lost&#39;, &#39;lost&#39;, &#39;lost&#39;, &#39;air&#39;, &#39;breathe&#39;, &#39;air&#39;, &#39;breathe&#39;, &#39;holy&#39;, &#39;presence&#39;, &#39;living&#39;]
== Simple Man - Newsboys ==
[&#39;time&#39;, &#39;rain&#39;, &#39;did&#39;, &#39;fall&#39;, &#39;cloud&#39;, &#39;started&#39;, &#39;form&#39;, &#39;lived&#39;, &#39;life&#39;, &#39;simple&#39;, &#39;man&#39;, &#39;heart&#39;, &#39;make&#39;, &#39;sound&#39;, &#39;tried&#39;, &#39;man&#39;, &#39;storing&#39;, &#39;rich&#39;, &#39;seen&#39;, &#39;felt&#39;, &#39;flame&#39;, &#39;warm&#39;, &#39;started&#39;, &#39;burn&#39;]
== Detainer - Day Of Fire ==
[&#39;hey&#39;, &#39;gonna&#39;, &#39;bring&#39;, &#39;home&#39;, &#39;hey&#39;, &#39;gonna&#39;, &#39;break&#39;, &#39;hold&#39;, &#39;want&#39;, &#39;want&#39;, &#39;want&#39;, &#39;let&#39;, &#39;want&#39;, &#39;want&#39;, &#39;want&#39;, &#39;let&#39;, &#39;hey&#39;, &#39;gonna&#39;, &#39;bring&#39;, &#39;home&#39;, &#39;hey&#39;, &#39;gonna&#39;, &#39;break&#39;, &#39;hold&#39;]
== I Will Celebrate - Paul Baloche ==
[&#39;celebrate&#39;, &#39;sing&#39;, &#39;unto&#39;, &#39;lord&#39;, &#39;sing&#39;, &#39;lord&#39;, &#39;new&#39;, &#39;song&#39;, &#39;celebrate&#39;, &#39;sing&#39;, &#39;unto&#39;, &#39;lord&#39;, &#39;sing&#39;, &#39;lord&#39;, &#39;new&#39;, &#39;song&#39;, &#39;heart&#39;, &#39;rejoicing&#39;, &#39;mind&#39;, &#39;focused&#39;, &#39;hand&#39;, &#39;raised&#39;, &#39;heaven&#39;, &#39;worshiping&#39;]
== The A,B,Cs - Go Fish ==
[&#39;know&#39;, &#39;time&#39;, &#39;won&#39;, &#39;sing&#39;, &#39;bridge&#39;, &#39;love&#39;, &#39;alphabet&#39;, &#39;letter&#39;, &#39;love&#39;, &#39;alphabet&#39;, &#39;won&#39;, &#39;sing&#39;, &#39;know&#39;, &#39;time&#39;, &#39;won&#39;, &#39;sing&#39;, &#39;know&#39;, &#39;alphabet&#39;, &#39;know&#39;, &#39;know&#39;, &#39;alphabet&#39;, &#39;time&#39;, &#39;won&#39;, &#39;sing&#39;]
== O Come Let Us Adore Him - Shane &amp; Shane ==
[&#39;oh&#39;, &#39;come&#39;, &#39;let&#39;, &#39;adore&#39;, &#39;oh&#39;, &#39;come&#39;, &#39;let&#39;, &#39;adore&#39;, &#39;oh&#39;, &#39;come&#39;, &#39;let&#39;, &#39;adore&#39;, &#39;christ&#39;, &#39;lord&#39;, &#39;worthy&#39;, &#39;worthy&#39;, &#39;worthy&#39;, &#39;christ&#39;, &#39;lord&#39;, &#39;glory&#39;, &#39;glory&#39;, &#39;glory&#39;, &#39;christ&#39;, &#39;lord&#39;]</code></pre>
<p>On the other side, let’s look at those with very long tokens.</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at song with long token length (&gt;99.5 percentile)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>df_sorted <span class="op">=</span> df_top[<span class="st">&#39;length_tokens&#39;</span>].sort_values().reset_index()</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>df_sorted[<span class="st">&#39;pct_rank&#39;</span>] <span class="op">=</span> df_sorted[<span class="st">&#39;length_tokens&#39;</span>].rank(pct<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df_sorted.loc[df_sorted[<span class="st">&#39;pct_rank&#39;</span>] <span class="op">&gt;</span> <span class="fl">0.995</span>, <span class="st">&#39;index&#39;</span>]:</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;==&#39;</span>, df_top.loc[i,<span class="st">&#39;name&#39;</span>], <span class="st">&#39;-&#39;</span>, df_top.loc[i,<span class="st">&#39;artists_name&#39;</span>], <span class="st">&#39;==&#39;</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df_top.loc[i,<span class="st">&#39;lyrics&#39;</span>])</span></code></pre></div>
<pre><code>== Next Five Minutes - Steven Curtis Chapman ==
The Machine Stops LyricsI
THE AIR-SHIP

         Imagine, if you can, a small room, hexagonal in shape, like the cell of a bee. It is lighted neither by window nor by lamp, yet it is filled with a soft radiance. There are no apertures for ventilation, yet the air is fresh. There are no musical instruments, and yet, at the moment that my meditation opens, this room is throbbing with melodious sounds. An armchair is in the centre, by its side a reading-desk—that is all the furniture. And in the armchair there sits a swaddled lump of flesh—a woman, about five feet high, with a face as white as a fungus. It is to her that the little room belongs.
        An electric bell rang.
        The woman touched a switch and the music was silent.
         &quot;I suppose I must see who it is&quot;, she thought, and set her chair in motion. The chair, like the music, was worked by machinery and it rolled her to the other side of the room where the bell still rang importunately.
         &quot;Who is it?&quot; she called. Her voice was irritable, for she had been interrupted often since the music began. She knew several thousand people; in certain directions human intercourse had advanced enormously.
         But when she listened into the receiver, her white face wrinkled into smiles, and she said:
         &quot;Very well. Let us talk, I will isolate myself. I do not expect anything important will happen for the next five minutes—for I can give you fully five minutes, Kuno. Then I must deliver my lecture on &#39;Music during the Australian Period.&#39; &quot;
         She touched the isolation knob, so that no one else could speak to her. Then she touched the lighting apparatus, and the little room was plunged into darkness.
         &quot;Be quick!&quot; She called, her irritation returning. &quot;Be quick, Kuno; here I am in the dark wasting my time.&quot;
         But it was fully fifteen seconds before the round plate that she held in her hands began to glow. A faint blue light shot across it, darkening to purple, and presently she could see the image of her son, who lived on the other side of the earth, and he could see her.
         &quot;Kuno, how slow you are.&quot;
         He smiled gravely.
         &quot;I really believe you enjoy dawdling.&quot;
         &quot;I have called you before, mother, but you were always busy or isolated. I have something particular to say.&quot;
         &quot;What is it, dearest boy? Be quick. Why could you not send it by pneumatic post?&quot;
         &quot;Because I prefer saying such a thing. I want—&quot;
         &quot;Well?&quot;
         &quot;I want you to come and see me.&quot;
         Vashti watched his face in the blue plate.
         &quot;But I can see you!&quot; she exclaimed. &quot;What more do you want?&quot;
         &quot;I want to see you not through the Machine,&quot; said Kuno. &quot;I want to speak to you not through the wearisome Machine.&quot;
         &quot;Oh, hush!&quot; said his mother, vaguely shocked. &quot;You mustn&quot;t say anything against the Machine.&quot;
         &quot;Why not?&quot;
         &quot;One mustn&quot;t.&quot;
         &quot;You talk as if a god had made the Machine,&quot; cried the other. &quot;I believe that you pray to it when you are unhappy. Men made it, do not forget that. Great men, but men. The Machine is much, but it is not everything. I see something like you in this plate, but I do not see you. I hear something like you through this telephone, but I do not hear you. That is why I want you to come. Pay me a visit, so that we can meet face to face, and talk about the hopes that are in my mind.&quot;
         She replied that she could scarcely spare the time for a visit.
         &quot;The air-ship barely takes two days to fly between me and you.&quot;
         &quot;I dislike air-ships.&quot;
         &quot;Why?&quot;
         &quot;I dislike seeing the horrible brown earth, and the sea, and the stars when it is dark. I get no ideas in an air-ship.&quot;
         &quot;I do not get them anywhere else.&quot;
         &quot;What kind of ideas can the air give you?&quot;
         He paused for an instant.
         &quot;Do you not know four big stars that form an oblong, and three stars close together in the middle of the oblong, and hanging from these stars, three other stars?&quot;
         &quot;No, I do not. I dislike the stars. But did they give you an idea? How interesting; tell me.&quot;
         &quot;I had an idea that they were like a man.&quot;
         &quot;I do not understand.&quot;
         &quot;The four big stars are the man&#39;s shoulders and his knees. The three stars in the middle are like the belts that men wore once, and the three stars hanging are like a sword.&quot;
         &quot;A sword?&quot;
         &quot;Men carried swords about with them, to kill animals and other men.&quot;
         &quot;It does not strike me as a very good idea, but it is certainly original. When did it come to you first?&quot;
         &quot;In the air-ship—&quot; He broke off, and she fancied that he looked sad. She could not be sure, for the Machine did not transmit nuances of expression. It only gave a general idea of people—an idea that was good enough for all practical purposes, Vashti thought. The imponderable bloom, declared by a discredited philosophy to be the actual essence of intercourse, was rightly ignored by the Machine, just as the imponderable bloom of the grape was ignored by the manufacturers of artificial fruit. Something &quot;good enough&quot; had long since been accepted by our race.
         &quot;The truth is,&quot; he continued, &quot;that I want to see these stars again. They are curious stars. I want to see them not from the air-ship, but from the surface of the earth, as our ancestors did, thousands of years ago. I want to visit the surface of the earth.&quot;
         She was shocked again.
         &quot;Mother, you must come, if only to explain to me what is the harm of visiting the surface of the earth.&quot;
         &quot;No harm,&quot; she replied, controlling herself. &quot;But no advantage. The surface of the earth is only dust and mud; no life remains on it, and you would need a respirator, or the cold of the outer air would kill you. One dies immediately in the outer air.&quot;
         &quot;I know; of course I shall take all precautions.&quot;
         &quot;And besides—&quot;
         &quot;Well?&quot;
         She considered, and chose her words with care. Her son had a queer temper, and she wished to dissuade him from the expedition.
         &quot;It is contrary to the spirit of the age,&quot; she asserted.
         &quot;Do you mean by that, contrary to the Machine?&quot;
         &quot;In a sense, but—&quot;
         His image is the blue plate faded.
         &quot;Kuno!&quot;
         He had isolated himself.
         For a moment Vashti felt lonely.
         Then she generated the light, and the sight of her room, flooded with radiance and studded with electric buttons, revived her. There were buttons and switches everywhere—buttons to call for food, for music, for clothing. There was the hot-bath button, by pressure of which a basin of (imitation) marble rose out of the floor, filled to the brim with a warm deodorized liquid. There was the cold-bath button. There was the button that produced literature. And there were of course the buttons by which she communicated with her friends. The room, though it contained nothing, was in touch with all that she cared for in the world.</code></pre>
<p>….</p>
<p>Some songs have very long token length because of incorrect lyrics
(random literature assigned as the lyrics). Let’s try once again to
retrieve the lyrics based on only the track name.</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># try to search for lyrics again without artist name (for songs with long token length &gt;1000)</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>idx_redo <span class="op">=</span> df_top.index[df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))<span class="op">&gt;</span><span class="dv">1000</span>]</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> idx_redo:</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    df_top.loc[idx, <span class="st">&#39;lyrics&#39;</span>] <span class="op">=</span> get_lyrics(df_top.loc[idx, <span class="st">&#39;name&#39;</span>], <span class="st">&#39;&#39;</span>)</span></code></pre></div>
<pre><code>Searching for &quot;As the Deer&quot;...
Done.
Searching for &quot;Psalm 139&quot;...
Done.
Searching for &quot;Ding Dong Merrily On High&quot;...
Done.
Searching for &quot;When Life Gets Broken&quot;...
Done.
Searching for &quot;There Is a Redeemer&quot;...
Done.
Searching for &quot;All Creatures Of Our God And King&quot;...
Done.
Searching for &quot;1,000 Miles&quot;...
Done.
Searching for &quot;And Can It Be That I Should Gain&quot;...
Done.
Searching for &quot;Guide Me O Thou Great Jehovah&quot;...
Done.
Searching for &quot;Word Of God Speak&quot;...
Done.
Searching for &quot;Santa Claus Is Coming to Town&quot;...
Done.
Searching for &quot;The Gift Of St.Cecilia&quot;...
Done.
Searching for &quot;The Thirst Is Taking Over&quot;...
Done.
Searching for &quot;Little Drummer Boy&quot;...
Done.
Searching for &quot;My Jesus I Love Thee/&#39;Tis So Sweet&quot;...
Done.
Searching for &quot;My Deliverer&quot;...
Done.
Searching for &quot;Next Five Minutes&quot;...
Done.
Searching for &quot;Have Yourself A Merry Little Christmas&quot;...
Done.
Searching for &quot;I Waited for the Lord On High&quot;...
Done.
Searching for &quot;Angels We Have Heard On High&quot;...
Done.
Searching for &quot;To Be Pleasing You&quot;...
Done.
Searching for &quot;We Choose The Fear Of The Lord&quot;...
Done.
Searching for &quot;When The Roll Is Called Up Yonder&quot;...
Done.
..........and more..........</code></pre>
<div class="sourceCode" id="cb59"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenize new lyrics</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>df_top.loc[idx_redo, <span class="st">&#39;tokens&#39;</span>] <span class="op">=</span> df_top.loc[idx_redo, <span class="st">&#39;lyrics&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: lyric_tokenize(x) <span class="cf">if</span> pd.notnull(x) <span class="cf">else</span> <span class="st">&#39;NA&#39;</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replot distribution of token length</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;length_tokens&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;length_tokens&#39;</span>].hist(bins<span class="op">=</span><span class="dv">50</span>)</span></code></pre></div>
<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x221613a1c50&gt;</code></pre>
<p><img src="output_47_1.png" /></p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># relook at long token length &gt;500</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>idx_redo <span class="op">=</span> df_top.index[df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))<span class="op">&gt;</span><span class="dv">500</span>]</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>df_top.loc[idx_redo, [<span class="st">&#39;name&#39;</span>,<span class="st">&#39;lyrics&#39;</span>,<span class="st">&#39;artists_name&#39;</span>]]</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
name
</th>
<th>
lyrics
</th>
<th>
artists_name
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
24709
</th>
<td>
1,000 Names
</td>
<td>
[Verse 1: Chris Rivers]believe these …
</td>
<td>
Passion
</td>
</tr>
<tr>
<th>
5608
</th>
<td>
God Of Wonders
</td>
<td>
DON CARLOS; the MARQUIS POSA enters.…
</td>
<td>
Passion
</td>
</tr>
<tr>
<th>
10701
</th>
<td>
The Gift Of St.Cecilia
</td>
<td>
My First Acquaintance With Poets LyricsMy fath…
</td>
<td>
Jars Of Clay
</td>
</tr>
<tr>
<th>
7711
</th>
<td>
The Solid Rock
</td>
<td>
HIS SUFFERINGS SINCE HE BECAME THE SLAVE OF LO…
</td>
<td>
Passion
</td>
</tr>
<tr>
<th>
3175
</th>
<td>
Next Five Minutes
</td>
<td>
The Machine Stops LyricsIAIR-SHIP   …
</td>
<td>
Steven Curtis Chapman
</td>
</tr>
<tr>
<th>
6726
</th>
<td>
Dear Slim Pt. 2
</td>
<td>
[Verse 1]Slim, I wrote you but you ain’…
</td>
<td>
KJ-52
</td>
</tr>
<tr>
<th>
6864
</th>
<td>
There’s A lot Of Pain
</td>
<td>
[Verse 1]said you better dot your I’s a…
</td>
<td>
Robin Mark
</td>
</tr>
<tr>
<th>
765
</th>
<td>
When A Window Is A Mirror
</td>
<td>
[Intro], buck, buck…
</td>
<td>
Michael Card
</td>
</tr>
<tr>
<th>
2762
</th>
<td>
The Tabernacle
</td>
<td>
Chloraseptic (Remix) Lyrics[Intro: 2 Chainz]…
</td>
<td>
Bill &amp; Gloria Gaither
</td>
</tr>
<tr>
<th>
1174
</th>
<td>
Power Praise
</td>
<td>
Most conscious attempts to predict the future …
</td>
<td>
Petra
</td>
</tr>
<tr>
<th>
62
</th>
<td>
Job Suite: His Story, His Lament, His God, His…
</td>
<td>
The Crying of Lot 49 Chapter 1 LyricsThe Cryin…
</td>
<td>
Michael Card
</td>
</tr>
<tr>
<th>
843
</th>
<td>
Inside Out
</td>
<td>
[Intro]spent my 19th bir…
</td>
<td>
David Meece
</td>
</tr>
</tbody>
</table>
</div>
<p>We will remove those with &gt;500 token length.</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove long tokens</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>df_top.drop(index<span class="op">=</span>idx_redo, inplace<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<div class="sourceCode" id="cb63"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count number of songs for each year</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>df_top.groupby(<span class="st">&#39;release_year&#39;</span>)[<span class="st">&#39;name&#39;</span>].count()</span></code></pre></div>
<pre><code>release_year
1990    120
1991    125
1992    121
1993    131
1994    141
1995    124
1996    136
1997    125
1998    130
1999    105
2000    138
2001    125
2002    139
2003    128
2004    138
2005    136
2006    133
2007    132
2008    138
2009    139
2010    136
2011    140
2012    137
2013    128
2014    121
2015    132
2016    131
2017    128
2018    129
2019    120
2020    122
2021    128
Name: name, dtype: int64</code></pre>
<p>use TFIDF to check word distribution</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine token</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>df_top[<span class="st">&#39;sentences&#39;</span>] <span class="op">=</span> df_top[<span class="st">&#39;tokens&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">&#39; &#39;</span>.join(x))</span></code></pre></div>
<div class="sourceCode" id="cb66"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tokenize(text):</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tokenize sentence and word</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    tokenizer <span class="op">=</span> RegexpTokenizer(<span class="vs">r&quot;[a-zA-Z]{2,}&quot;</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> [word <span class="cf">for</span> word <span class="kw">in</span> tokenizer.tokenize(text)]</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tokens</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># define vectorizer parameters</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>tfidf_vectorizer_n <span class="op">=</span> TfidfVectorizer(max_features<span class="op">=</span><span class="dv">1000</span>, lowercase<span class="op">=</span><span class="va">True</span>, tokenizer<span class="op">=</span>lyric_tokenize,</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>                                 use_idf<span class="op">=</span><span class="va">True</span>, ngram_range<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>ls_lyrics <span class="op">=</span> df_top[<span class="st">&#39;lyrics&#39;</span>].to_list()</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="co"># fit the vectorizer</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>time tfidf_matrix_n <span class="op">=</span> tfidf_vectorizer_n.fit_transform(ls_lyrics)</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tfidf_matrix_n.shape)</span></code></pre></div>
<pre><code>Wall time: 10.2 s
(4156, 1000)</code></pre>
<div class="sourceCode" id="cb68"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get top tf-idf term</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_top_keywords(data, clusters, labels, n_terms):</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data.todense()).groupby(clusters).mean()</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i,r <span class="kw">in</span> df.iterrows():</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">Year </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i))</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&#39;,&#39;</span>.join([labels[t] <span class="cf">for</span> t <span class="kw">in</span> np.argsort(r)[<span class="op">-</span>n_terms:].sort_index(ascending<span class="op">=</span><span class="va">False</span>)]))</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>get_top_keywords(tfidf_matrix_n, df_top[<span class="st">&#39;release_year&#39;</span>].to_list(), tfidf_vectorizer_n.get_feature_names(), <span class="dv">10</span>)</span></code></pre></div>
<pre><code>Year 1990
love,know,lord,oh,need,god,just,time,world,long

Year 1991
love,know,don,oh,come,day,need,heart,time,got

Year 1992
love,heart,know,let,don,time,got,oh,world,christmas

Year 1993
love,god,world,know,heart,life,day,man,jesus,way

Year 1994
love,know,lord,let,life,heart,jesus,god,light,just

Year 1995
love,god,life,know,heart,need,lord,come,time,don

Year 1996
love,god,know,let,don,like,life,heart,want,oh

Year 1997
love,lord,god,like,know,time,let,oh,just,way

Year 1998
love,lord,god,know,thou,life,heaven,soul,world,heart

Year 1999
love,know,good,god,like,way,yeah,lord,away,time

Year 2000
know,love,god,yeah,lord,life,just,let,like,heart

Year 2001
love,god,want,know,lord,oh,way,let,heart,thing

Year 2002
lord,love,know,god,praise,heart,oh,holy,like,let

Year 2003
love,know,life,just,lord,god,don,want,let,like

Year 2004
love,know,lord,want,just,life,beautiful,heart,don,let

Year 2005
love,holy,lord,god,let,come,day,know,world,christmas

Year 2006
let,love,lord,know,want,life,sing,don,god,say

Year 2007
love,christmas,day,oh,just,know,heart,come,let,lord

Year 2008
love,come,oh,time,like,know,let,heart,jesus,god

Year 2009
love,oh,know,come,don,like,let,heart,world,just

Year 2010
god,love,oh,let,know,lord,heart,want,great,tonight

Year 2011
god,love,sing,come,let,oh,jesus,holy,lord,know

Year 2012
come,love,let,oh,god,lord,life,know,heart,jesus

Year 2013
love,oh,oh oh,god,jesus,life,hope,heart,need,like

Year 2014
love,oh,come,god,let,heart,life,jesus,oh oh,glory

Year 2015
love,oh,god,lord,let,come,life,heart,like,know

Year 2016
oh,love,heart,god,come,lord,life,like,praise,jesus

Year 2017
love,let,oh,heart,come,jesus,god,like,know,hope

Year 2018
oh,love,god,won,jesus,know,don,like,heart,hallelujah

Year 2019
oh,god,oh oh,know,jesus,praise,love,don,heart,need

Year 2020
oh,oh oh,god,love,let,know,yeah,sing,come,like

Year 2021
oh,oh oh,god,love,don,know,come,yeah,need,believe</code></pre>
<div class="sourceCode" id="cb70"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 word count for each year</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">sorted</span>(<span class="bu">set</span>(df_top[<span class="st">&#39;release_year&#39;</span>])):</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    all_tokens <span class="op">=</span> []</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    df_temp <span class="op">=</span> df_top.loc[df_top[<span class="st">&#39;release_year&#39;</span>]<span class="op">==</span>year, <span class="st">&#39;tokens&#39;</span>]</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(year)</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    [all_tokens.extend(t) <span class="cf">for</span> t <span class="kw">in</span> df_temp]</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(nltk.FreqDist(all_tokens).most_common(<span class="dv">10</span>))</span></code></pre></div>
<pre><code>1990
[(&#39;oh&#39;, 370), (&#39;love&#39;, 222), (&#39;lord&#39;, 164), (&#39;know&#39;, 143), (&#39;god&#39;, 135), (&#39;heart&#39;, 106), (&#39;just&#39;, 103), (&#39;light&#39;, 102), (&#39;world&#39;, 100), (&#39;life&#39;, 99)]
1991
[(&#39;love&#39;, 244), (&#39;know&#39;, 215), (&#39;oh&#39;, 168), (&#39;don&#39;, 141), (&#39;heart&#39;, 130), (&#39;just&#39;, 116), (&#39;la&#39;, 112), (&#39;like&#39;, 107), (&#39;come&#39;, 107), (&#39;need&#39;, 106)]
1992
[(&#39;love&#39;, 361), (&#39;know&#39;, 206), (&#39;heart&#39;, 198), (&#39;oh&#39;, 161), (&#39;let&#39;, 149), (&#39;come&#39;, 148), (&#39;free&#39;, 130), (&#39;god&#39;, 129), (&#39;don&#39;, 128), (&#39;got&#39;, 124)]
1993
[(&#39;love&#39;, 360), (&#39;god&#39;, 199), (&#39;heart&#39;, 179), (&#39;know&#39;, 159), (&#39;lord&#39;, 143), (&#39;way&#39;, 142), (&#39;jesus&#39;, 124), (&#39;life&#39;, 123), (&#39;like&#39;, 123), (&#39;just&#39;, 120)]
1994
[(&#39;love&#39;, 357), (&#39;know&#39;, 194), (&#39;lord&#39;, 193), (&#39;heart&#39;, 154), (&#39;let&#39;, 148), (&#39;life&#39;, 137), (&#39;sing&#39;, 130), (&#39;god&#39;, 127), (&#39;just&#39;, 120), (&#39;come&#39;, 118)]
1995
[(&#39;love&#39;, 366), (&#39;god&#39;, 190), (&#39;oh&#39;, 163), (&#39;day&#39;, 160), (&#39;lord&#39;, 153), (&#39;come&#39;, 140), (&#39;life&#39;, 138), (&#39;know&#39;, 136), (&#39;heart&#39;, 129), (&#39;sing&#39;, 108)]
1996
[(&#39;god&#39;, 263), (&#39;love&#39;, 246), (&#39;know&#39;, 222), (&#39;let&#39;, 217), (&#39;heart&#39;, 173), (&#39;oh&#39;, 158), (&#39;life&#39;, 143), (&#39;yeah&#39;, 133), (&#39;like&#39;, 127), (&#39;come&#39;, 123)]
1997
[(&#39;love&#39;, 212), (&#39;god&#39;, 166), (&#39;lord&#39;, 148), (&#39;know&#39;, 145), (&#39;like&#39;, 145), (&#39;oh&#39;, 122), (&#39;time&#39;, 114), (&#39;just&#39;, 110), (&#39;let&#39;, 109), (&#39;come&#39;, 105)]
1998
[(&#39;love&#39;, 296), (&#39;god&#39;, 167), (&#39;lord&#39;, 152), (&#39;know&#39;, 150), (&#39;life&#39;, 122), (&#39;heart&#39;, 118), (&#39;good&#39;, 114), (&#39;come&#39;, 109), (&#39;let&#39;, 109), (&#39;oh&#39;, 107)]
1999
[(&#39;love&#39;, 273), (&#39;know&#39;, 202), (&#39;want&#39;, 145), (&#39;like&#39;, 141), (&#39;day&#39;, 139), (&#39;god&#39;, 123), (&#39;lord&#39;, 119), (&#39;way&#39;, 116), (&#39;sing&#39;, 106), (&#39;yeah&#39;, 105)]
2000
[(&#39;love&#39;, 289), (&#39;know&#39;, 251), (&#39;god&#39;, 174), (&#39;lord&#39;, 172), (&#39;yeah&#39;, 171), (&#39;oh&#39;, 155), (&#39;like&#39;, 147), (&#39;heart&#39;, 140), (&#39;come&#39;, 136), (&#39;life&#39;, 130)]
2001
[(&#39;love&#39;, 287), (&#39;oh&#39;, 225), (&#39;god&#39;, 192), (&#39;know&#39;, 166), (&#39;na&#39;, 159), (&#39;sing&#39;, 158), (&#39;yeah&#39;, 143), (&#39;let&#39;, 142), (&#39;holy&#39;, 139), (&#39;come&#39;, 125)]
2002
[(&#39;love&#39;, 359), (&#39;lord&#39;, 342), (&#39;la&#39;, 306), (&#39;know&#39;, 235), (&#39;god&#39;, 216), (&#39;oh&#39;, 175), (&#39;heart&#39;, 128), (&#39;like&#39;, 119), (&#39;let&#39;, 116), (&#39;life&#39;, 112)]
2003
[(&#39;love&#39;, 306), (&#39;know&#39;, 165), (&#39;oh&#39;, 155), (&#39;life&#39;, 138), (&#39;god&#39;, 136), (&#39;don&#39;, 130), (&#39;say&#39;, 127), (&#39;just&#39;, 125), (&#39;lord&#39;, 122), (&#39;let&#39;, 119)]
2004
[(&#39;love&#39;, 297), (&#39;lord&#39;, 250), (&#39;oh&#39;, 207), (&#39;sing&#39;, 198), (&#39;know&#39;, 179), (&#39;holy&#39;, 170), (&#39;want&#39;, 158), (&#39;god&#39;, 156), (&#39;heart&#39;, 153), (&#39;just&#39;, 153)]
2005
[(&#39;god&#39;, 255), (&#39;love&#39;, 209), (&#39;lord&#39;, 172), (&#39;holy&#39;, 142), (&#39;come&#39;, 139), (&#39;know&#39;, 136), (&#39;world&#39;, 136), (&#39;need&#39;, 133), (&#39;let&#39;, 131), (&#39;day&#39;, 130)]
2006
[(&#39;let&#39;, 244), (&#39;love&#39;, 210), (&#39;lord&#39;, 186), (&#39;know&#39;, 178), (&#39;god&#39;, 164), (&#39;life&#39;, 148), (&#39;want&#39;, 145), (&#39;come&#39;, 133), (&#39;don&#39;, 132), (&#39;like&#39;, 124)]
2007
[(&#39;love&#39;, 265), (&#39;la&#39;, 245), (&#39;oh&#39;, 196), (&#39;day&#39;, 172), (&#39;know&#39;, 156), (&#39;just&#39;, 150), (&#39;come&#39;, 139), (&#39;don&#39;, 129), (&#39;heart&#39;, 125), (&#39;lord&#39;, 121)]
2008
[(&#39;love&#39;, 353), (&#39;come&#39;, 238), (&#39;oh&#39;, 218), (&#39;like&#39;, 167), (&#39;god&#39;, 154), (&#39;know&#39;, 148), (&#39;let&#39;, 146), (&#39;heart&#39;, 138), (&#39;time&#39;, 129), (&#39;world&#39;, 112)]
2009
[(&#39;oh&#39;, 307), (&#39;love&#39;, 267), (&#39;know&#39;, 193), (&#39;like&#39;, 183), (&#39;come&#39;, 182), (&#39;just&#39;, 176), (&#39;let&#39;, 158), (&#39;don&#39;, 146), (&#39;life&#39;, 141), (&#39;god&#39;, 141)]
2010
[(&#39;god&#39;, 361), (&#39;love&#39;, 324), (&#39;oh&#39;, 302), (&#39;let&#39;, 190), (&#39;like&#39;, 156), (&#39;know&#39;, 143), (&#39;heart&#39;, 143), (&#39;la&#39;, 128), (&#39;just&#39;, 123), (&#39;need&#39;, 121)]
2011
[(&#39;love&#39;, 500), (&#39;god&#39;, 422), (&#39;oh&#39;, 311), (&#39;let&#39;, 238), (&#39;come&#39;, 229), (&#39;heart&#39;, 171), (&#39;know&#39;, 155), (&#39;sing&#39;, 153), (&#39;jesus&#39;, 152), (&#39;way&#39;, 150)]
2012
[(&#39;love&#39;, 343), (&#39;oh&#39;, 329), (&#39;come&#39;, 326), (&#39;god&#39;, 248), (&#39;let&#39;, 216), (&#39;life&#39;, 213), (&#39;know&#39;, 188), (&#39;heart&#39;, 187), (&#39;lord&#39;, 180), (&#39;la&#39;, 145)]
2013
[(&#39;oh&#39;, 554), (&#39;love&#39;, 410), (&#39;god&#39;, 221), (&#39;life&#39;, 187), (&#39;heart&#39;, 183), (&#39;like&#39;, 167), (&#39;come&#39;, 156), (&#39;know&#39;, 153), (&#39;jesus&#39;, 145), (&#39;let&#39;, 136)]
2014
[(&#39;oh&#39;, 439), (&#39;love&#39;, 369), (&#39;come&#39;, 192), (&#39;heart&#39;, 177), (&#39;like&#39;, 163), (&#39;life&#39;, 161), (&#39;let&#39;, 160), (&#39;god&#39;, 157), (&#39;jesus&#39;, 154), (&#39;know&#39;, 122)]
2015
[(&#39;love&#39;, 372), (&#39;oh&#39;, 363), (&#39;god&#39;, 266), (&#39;lord&#39;, 236), (&#39;heart&#39;, 209), (&#39;come&#39;, 198), (&#39;let&#39;, 194), (&#39;know&#39;, 186), (&#39;life&#39;, 175), (&#39;like&#39;, 175)]
2016
[(&#39;oh&#39;, 385), (&#39;love&#39;, 376), (&#39;come&#39;, 229), (&#39;heart&#39;, 219), (&#39;god&#39;, 216), (&#39;lord&#39;, 201), (&#39;life&#39;, 169), (&#39;know&#39;, 154), (&#39;let&#39;, 141), (&#39;like&#39;, 134)]
2017
[(&#39;love&#39;, 474), (&#39;oh&#39;, 261), (&#39;let&#39;, 242), (&#39;god&#39;, 217), (&#39;come&#39;, 208), (&#39;heart&#39;, 197), (&#39;like&#39;, 197), (&#39;know&#39;, 192), (&#39;life&#39;, 170), (&#39;jesus&#39;, 159)]
2018
[(&#39;oh&#39;, 446), (&#39;love&#39;, 312), (&#39;god&#39;, 238), (&#39;know&#39;, 205), (&#39;let&#39;, 187), (&#39;like&#39;, 165), (&#39;heart&#39;, 164), (&#39;jesus&#39;, 161), (&#39;won&#39;, 156), (&#39;come&#39;, 144)]
2019
[(&#39;oh&#39;, 495), (&#39;god&#39;, 349), (&#39;love&#39;, 335), (&#39;know&#39;, 306), (&#39;heart&#39;, 199), (&#39;don&#39;, 184), (&#39;jesus&#39;, 179), (&#39;come&#39;, 175), (&#39;just&#39;, 156), (&#39;like&#39;, 150)]
2020
[(&#39;oh&#39;, 683), (&#39;god&#39;, 391), (&#39;love&#39;, 309), (&#39;let&#39;, 290), (&#39;know&#39;, 271), (&#39;yeah&#39;, 249), (&#39;like&#39;, 221), (&#39;come&#39;, 216), (&#39;lord&#39;, 201), (&#39;sing&#39;, 181)]
2021
[(&#39;oh&#39;, 1367), (&#39;god&#39;, 333), (&#39;love&#39;, 326), (&#39;know&#39;, 270), (&#39;come&#39;, 250), (&#39;yeah&#39;, 248), (&#39;lord&#39;, 244), (&#39;don&#39;, 212), (&#39;wait&#39;, 205), (&#39;say&#39;, 185)]</code></pre>
<div class="sourceCode" id="cb72"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create word cloud</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">sorted</span>(<span class="bu">set</span>(df_top[<span class="st">&#39;release_year&#39;</span>])):</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    all_tokens <span class="op">=</span> []</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    df_temp <span class="op">=</span> df_top.loc[df_top[<span class="st">&#39;release_year&#39;</span>]<span class="op">==</span>year, <span class="st">&#39;tokens&#39;</span>]</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(year)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    [all_tokens.extend(t) <span class="cf">for</span> t <span class="kw">in</span> df_temp]</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    wordcloud_n <span class="op">=</span> WordCloud().generate(<span class="st">&#39; &#39;</span>.join(all_tokens))</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Display the generated image:</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>    plt.imshow(wordcloud_n, interpolation<span class="op">=</span><span class="st">&#39;bilinear&#39;</span>)</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    plt.axis(<span class="st">&quot;off&quot;</span>)</span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div>
<pre><code>1990</code></pre>
<p><img src="output_56_1.png" /></p>
<pre><code>1991</code></pre>
<p><img src="output_56_3.png" /></p>
<pre><code>1992</code></pre>
<p><img src="output_56_5.png" /></p>
<pre><code>1993</code></pre>
<p><img src="output_56_7.png" /></p>
<pre><code>1994</code></pre>
<p><img src="output_56_9.png" /></p>
<pre><code>1995</code></pre>
<p><img src="output_56_11.png" /></p>
<pre><code>1996</code></pre>
<p><img src="output_56_13.png" /></p>
<pre><code>1997</code></pre>
<p><img src="output_56_15.png" /></p>
<pre><code>1998</code></pre>
<p><img src="output_56_17.png" /></p>
<pre><code>1999</code></pre>
<p><img src="output_56_19.png" /></p>
<pre><code>2000</code></pre>
<p><img src="output_56_21.png" /></p>
<pre><code>2001</code></pre>
<p><img src="output_56_23.png" /></p>
<pre><code>2002</code></pre>
<p><img src="output_56_25.png" /></p>
<pre><code>2003</code></pre>
<p><img src="output_56_27.png" /></p>
<pre><code>2004</code></pre>
<p><img src="output_56_29.png" /></p>
<pre><code>2005</code></pre>
<p><img src="output_56_31.png" /></p>
<pre><code>2006</code></pre>
<p><img src="output_56_33.png" /></p>
<pre><code>2007</code></pre>
<p><img src="output_56_35.png" /></p>
<pre><code>2008</code></pre>
<p><img src="output_56_37.png" /></p>
<pre><code>2009</code></pre>
<p><img src="output_56_39.png" /></p>
<pre><code>2010</code></pre>
<p><img src="output_56_41.png" /></p>
<pre><code>2011</code></pre>
<p><img src="output_56_43.png" /></p>
<pre><code>2012</code></pre>
<p><img src="output_56_45.png" /></p>
<pre><code>2013</code></pre>
<p><img src="output_56_47.png" /></p>
<pre><code>2014</code></pre>
<p><img src="output_56_49.png" /></p>
<pre><code>2015</code></pre>
<p><img src="output_56_51.png" /></p>
<pre><code>2016</code></pre>
<p><img src="output_56_53.png" /></p>
<pre><code>2017</code></pre>
<p><img src="output_56_55.png" /></p>
<pre><code>2018</code></pre>
<p><img src="output_56_57.png" /></p>
<pre><code>2019</code></pre>
<p><img src="output_56_59.png" /></p>
<pre><code>2020</code></pre>
<p><img src="output_56_61.png" /></p>
<pre><code>2021</code></pre>
<p><img src="output_56_63.png" /></p>
<p><strong>‘Love’ has been the common theme of Christian songs
throughout the years. Other words are also frequently found like ‘know’
and ‘heart’</strong> We will explore this more using Tableau
dashboard.</p>
<h3 id="prepare-data-for-tableau">5. Prepare data for Tableau</h3>
<p>Before exploring our data in Tableau, let’s prepare the data.</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort dataframe by release year and name</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df_top.sort_values(by<span class="op">=</span>[<span class="st">&#39;release_year&#39;</span>,<span class="st">&#39;name&#39;</span>]).reset_index(drop<span class="op">=</span><span class="va">True</span>).reset_index()</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>df_final.head()</span></code></pre></div>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
index
</th>
<th>
original_name
</th>
<th>
artists_name
</th>
<th>
image_url
</th>
<th>
release_year
</th>
<th>
duration_ms
</th>
<th>
external_urls
</th>
<th>
popularity
</th>
<th>
danceability
</th>
<th>
energy
</th>
<th>
…
</th>
<th>
instrumentalness
</th>
<th>
liveness
</th>
<th>
valence
</th>
<th>
tempo
</th>
<th>
key
</th>
<th>
time_signature
</th>
<th>
name
</th>
<th>
lyrics
</th>
<th>
tokens
</th>
<th>
length_tokens
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0
</td>
<td>
A Love Calling - Powerhouse Album Version
</td>
<td>
Whiteheart
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02f117a6"
class="uri">https://i.scdn.co/image/ab67616d00001e02f117a6</a>…
</td>
<td>
1990
</td>
<td>
385472
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/5y"
class="uri">https://open.spotify.com/track/5y</a>…
</td>
<td>
14
</td>
<td>
0.531
</td>
<td>
0.342
</td>
<td>
…
</td>
<td>
0.000660
</td>
<td>
0.1040
</td>
<td>
0.108
</td>
<td>
92.955
</td>
<td>
9
</td>
<td>
4
</td>
<td>
A Love Calling
</td>
<td>
Like the dawn breakinglight came shining…
</td>
<td>
[like, dawn, breaking, light, came, shining, h…
</td>
<td>
97
</td>
</tr>
<tr>
<th>
1
</th>
<td>
1
</td>
<td>
Agnus Dei
</td>
<td>
Michael W. Smith
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02cc9004"
class="uri">https://i.scdn.co/image/ab67616d00001e02cc9004</a>…
</td>
<td>
1990
</td>
<td>
308800
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/75"
class="uri">https://open.spotify.com/track/75</a>…
</td>
<td>
29
</td>
<td>
0.369
</td>
<td>
0.456
</td>
<td>
…
</td>
<td>
0.000010
</td>
<td>
0.0532
</td>
<td>
0.152
</td>
<td>
137.425
</td>
<td>
0
</td>
<td>
4
</td>
<td>
Agnus Dei
</td>
<td>
[Instrumental], Alleluia...
</td>
<td>
[instrumental, alleluia, alleluia, lord, god, …
</td>
<td>
88
</td>
</tr>
<tr>
<th>
2
</th>
<td>
2
</td>
<td>
Ain’t No Stoppin’ Now
</td>
<td>
Bryan Duncan
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02481b86"
class="uri">https://i.scdn.co/image/ab67616d00001e02481b86</a>…
</td>
<td>
1990
</td>
<td>
246693
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6U"
class="uri">https://open.spotify.com/track/6U</a>…
</td>
<td>
12
</td>
<td>
0.697
</td>
<td>
0.843
</td>
<td>
…
</td>
<td>
0.000004
</td>
<td>
0.0995
</td>
<td>
0.732
</td>
<td>
138.266
</td>
<td>
2
</td>
<td>
4
</td>
<td>
Ain’t No Stoppin’ Now
</td>
<td>
Well, the world’s full of crazy people’…
</td>
<td>
[world, crazy, people, haven, got, clue, oh, o…
</td>
<td>
249
</td>
</tr>
<tr>
<th>
3
</th>
<td>
3
</td>
<td>
All I Can See - Hell Is For Wimps Album Version
</td>
<td>
Newsboys
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e028a0b96"
class="uri">https://i.scdn.co/image/ab67616d00001e028a0b96</a>…
</td>
<td>
1990
</td>
<td>
291246
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/11"
class="uri">https://open.spotify.com/track/11</a>…
</td>
<td>
8
</td>
<td>
0.440
</td>
<td>
0.411
</td>
<td>
…
</td>
<td>
0.000000
</td>
<td>
0.1140
</td>
<td>
0.211
</td>
<td>
128.266
</td>
<td>
2
</td>
<td>
5
</td>
<td>
All I Can See
</td>
<td>
We have walked in the shadowsthrough th…
</td>
<td>
[walked, shadow, storm, fought, battle, living…
</td>
<td>
47
</td>
</tr>
<tr>
<th>
4
</th>
<td>
4
</td>
<td>
All Is Forgiven
</td>
<td>
Bryan Duncan
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02481b86"
class="uri">https://i.scdn.co/image/ab67616d00001e02481b86</a>…
</td>
<td>
1990
</td>
<td>
262106
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/5j"
class="uri">https://open.spotify.com/track/5j</a>…
</td>
<td>
9
</td>
<td>
0.636
</td>
<td>
0.589
</td>
<td>
…
</td>
<td>
0.000003
</td>
<td>
0.0701
</td>
<td>
0.521
</td>
<td>
138.444
</td>
<td>
1
</td>
<td>
4
</td>
<td>
All Is Forgiven
</td>
<td>
Never been all that close to you’ to …
</td>
<td>
[close, startin, wonder, deeper, conversation,…
</td>
<td>
131
</td>
</tr>
</tbody>
</table>
<p>
5 rows × 23 columns
</p>
</div>
<div class="sourceCode" id="cb106"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 100 songs by popularity for each year</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df_final.sort_values(<span class="st">&#39;popularity&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>).groupby(<span class="st">&#39;release_year&#39;</span>)<span class="op">\</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>[<span class="st">&#39;index&#39;</span>, <span class="st">&#39;original_name&#39;</span>, <span class="st">&#39;image_url&#39;</span>, <span class="st">&#39;name&#39;</span>, <span class="st">&#39;artists_name&#39;</span>, <span class="st">&#39;release_year&#39;</span>, <span class="st">&#39;duration_ms&#39;</span>,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;external_urls&#39;</span>, <span class="st">&#39;popularity&#39;</span>, <span class="st">&#39;danceability&#39;</span>, <span class="st">&#39;energy&#39;</span>, <span class="st">&#39;loudness&#39;</span>, <span class="st">&#39;speechiness&#39;</span>,</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;acousticness&#39;</span>, <span class="st">&#39;instrumentalness&#39;</span>, <span class="st">&#39;liveness&#39;</span>, <span class="st">&#39;valence&#39;</span>, <span class="st">&#39;tempo&#39;</span>, <span class="st">&#39;key&#39;</span>, <span class="st">&#39;time_signature&#39;</span>,</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;lyrics&#39;</span>, <span class="st">&#39;tokens&#39;</span>, <span class="st">&#39;length_tokens&#39;</span>].head(<span class="dv">100</span>)</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>df_final.sort_values(by<span class="op">=</span>[<span class="st">&#39;release_year&#39;</span>,<span class="st">&#39;popularity&#39;</span>], ascending <span class="op">=</span> [<span class="va">True</span>, <span class="va">False</span>])</span></code></pre></div>
<pre><code>C:\Users\nn\Anaconda3\lib\site-packages\ipykernel_launcher.py:3: FutureWarning: Indexing with multiple keys (implicitly converted to a tuple of keys) will be deprecated, use a list instead.
  This is separate from the ipykernel package so we can avoid doing imports until</code></pre>
<div class="scrollit">
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
    .scrollit {
    overflow:scroll;
    height:500px;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
index
</th>
<th>
original_name
</th>
<th>
image_url
</th>
<th>
name
</th>
<th>
artists_name
</th>
<th>
release_year
</th>
<th>
duration_ms
</th>
<th>
external_urls
</th>
<th>
popularity
</th>
<th>
danceability
</th>
<th>
…
</th>
<th>
acousticness
</th>
<th>
instrumentalness
</th>
<th>
liveness
</th>
<th>
valence
</th>
<th>
tempo
</th>
<th>
key
</th>
<th>
time_signature
</th>
<th>
lyrics
</th>
<th>
tokens
</th>
<th>
length_tokens
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
35
</th>
<td>
35
</td>
<td>
How Beautiful
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02c860b3"
class="uri">https://i.scdn.co/image/ab67616d00001e02c860b3</a>…
</td>
<td>
How Beautiful
</td>
<td>
Twila Paris
</td>
<td>
1990
</td>
<td>
280866
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/1e"
class="uri">https://open.spotify.com/track/1e</a>…
</td>
<td>
52
</td>
<td>
0.296
</td>
<td>
…
</td>
<td>
0.9250
</td>
<td>
0.000013
</td>
<td>
0.0577
</td>
<td>
0.256
</td>
<td>
105.392
</td>
<td>
9
</td>
<td>
3
</td>
<td>
How Beautiful the hands that servedWine …
</td>
<td>
[beautiful, hand, served, wine, bread, son, ea…
</td>
<td>
90
</td>
</tr>
<tr>
<th>
76
</th>
<td>
76
</td>
<td>
Place In This World
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02cc9004"
class="uri">https://i.scdn.co/image/ab67616d00001e02cc9004</a>…
</td>
<td>
Place In This World
</td>
<td>
Michael W. Smith
</td>
<td>
1990
</td>
<td>
240173
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/0P"
class="uri">https://open.spotify.com/track/0P</a>…
</td>
<td>
47
</td>
<td>
0.446
</td>
<td>
…
</td>
<td>
0.3880
</td>
<td>
0.000018
</td>
<td>
0.1530
</td>
<td>
0.372
</td>
<td>
145.419
</td>
<td>
4
</td>
<td>
4
</td>
<td>
[Verse 1]wind is movingI am standi…
</td>
<td>
[wind, moving, standing, life, page, waiting, …
</td>
<td>
82
</td>
</tr>
<tr>
<th>
7
</th>
<td>
7
</td>
<td>
Another Time, Another Place
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02236103"
class="uri">https://i.scdn.co/image/ab67616d00001e02236103</a>…
</td>
<td>
Another Time, Another Place
</td>
<td>
Sandi Patty
</td>
<td>
1990
</td>
<td>
327800
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3g"
class="uri">https://open.spotify.com/track/3g</a>…
</td>
<td>
35
</td>
<td>
0.377
</td>
<td>
…
</td>
<td>
0.5120
</td>
<td>
0.000000
</td>
<td>
0.0980
</td>
<td>
0.133
</td>
<td>
96.856
</td>
<td>
0
</td>
<td>
4
</td>
<td>
[female]’ve always heard there is a land…
</td>
<td>
[female, heard, land, mortal, dream, man, male…
</td>
<td>
102
</td>
</tr>
<tr>
<th>
41
</th>
<td>
41
</td>
<td>
I Am on the Rock
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e0208e1b2"
class="uri">https://i.scdn.co/image/ab67616d00001e0208e1b2</a>…
</td>
<td>
I Am on the Rock
</td>
<td>
Petra
</td>
<td>
1990
</td>
<td>
277626
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6d"
class="uri">https://open.spotify.com/track/6d</a>…
</td>
<td>
33
</td>
<td>
0.559
</td>
<td>
…
</td>
<td>
0.0080
</td>
<td>
0.000005
</td>
<td>
0.0675
</td>
<td>
0.622
</td>
<td>
94.488
</td>
<td>
2
</td>
<td>
4
</td>
<td>
The earth is shakin’’s like a bad dream…
</td>
<td>
[earth, shakin, like, bad, dream, world, crumb…
</td>
<td>
66
</td>
</tr>
<tr>
<th>
115
</th>
<td>
115
</td>
<td>
Where There Is Faith
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02aa02b1"
class="uri">https://i.scdn.co/image/ab67616d00001e02aa02b1</a>…
</td>
<td>
Where There Is Faith
</td>
<td>
4Him
</td>
<td>
1990
</td>
<td>
297666
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6z"
class="uri">https://open.spotify.com/track/6z</a>…
</td>
<td>
33
</td>
<td>
0.542
</td>
<td>
…
</td>
<td>
0.2480
</td>
<td>
0.000001
</td>
<td>
0.0940
</td>
<td>
0.431
</td>
<td>
124.841
</td>
<td>
3
</td>
<td>
4
</td>
<td>
I believe in faithfulnessbelieve in giving…
</td>
<td>
[believe, faithfulness, believe, giving, belie…
</td>
<td>
110
</td>
</tr>
<tr>
<th>
…
</th>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
</tr>
<tr>
<th>
4063
</th>
<td>
4063
</td>
<td>
Graves into Gardens
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02646e94"
class="uri">https://i.scdn.co/image/ab67616d00001e02646e94</a>…
</td>
<td>
Graves into Gardens
</td>
<td>
Bethel Music
</td>
<td>
2021
</td>
<td>
453706
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/2s"
class="uri">https://open.spotify.com/track/2s</a>…
</td>
<td>
50
</td>
<td>
0.311
</td>
<td>
…
</td>
<td>
0.9650
</td>
<td>
0.000504
</td>
<td>
0.1590
</td>
<td>
0.216
</td>
<td>
130.416
</td>
<td>
5
</td>
<td>
3
</td>
<td>
I searched the worldit couldn’t fill me...
</td>
<td>
[searched, world, couldn, man, praise, treasur…
</td>
<td>
95
</td>
</tr>
<tr>
<th>
4090
</th>
<td>
4090
</td>
<td>
Kingdom Come
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e0255498b"
class="uri">https://i.scdn.co/image/ab67616d00001e0255498b</a>…
</td>
<td>
Kingdom Come
</td>
<td>
Rebecca St. James
</td>
<td>
2021
</td>
<td>
238666
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/4e"
class="uri">https://open.spotify.com/track/4e</a>…
</td>
<td>
50
</td>
<td>
0.618
</td>
<td>
…
</td>
<td>
0.0234
</td>
<td>
0.000003
</td>
<td>
0.1180
</td>
<td>
0.204
</td>
<td>
107.978
</td>
<td>
0
</td>
<td>
4
</td>
<td>
[Intro: Joel Smallbone &amp; Luke Smallbone]-o…
</td>
<td>
[oh, oh, oh, let, rejoice, oh, oh, oh, kingdom…
</td>
<td>
205
</td>
</tr>
<tr>
<th>
4150
</th>
<td>
4150
</td>
<td>
Where I’m Standing Now (feat. Brandon Lake)
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02d1b612"
class="uri">https://i.scdn.co/image/ab67616d00001e02d1b612</a>…
</td>
<td>
Where I’m Standing Now
</td>
<td>
Phil Wickham
</td>
<td>
2021
</td>
<td>
270560
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/3J"
class="uri">https://open.spotify.com/track/3J</a>…
</td>
<td>
50
</td>
<td>
0.303
</td>
<td>
…
</td>
<td>
0.0891
</td>
<td>
0.000000
</td>
<td>
0.1390
</td>
<td>
0.255
</td>
<td>
156.203
</td>
<td>
8
</td>
<td>
3
</td>
<td>
[Verse 1: Phil Wickham]of the wilderness…
</td>
<td>
[wilderness, deliverance, look, standing, hand…
</td>
<td>
165
</td>
</tr>
<tr>
<th>
4095
</th>
<td>
4095
</td>
<td>
Milk &amp; Honey
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02dc0719"
class="uri">https://i.scdn.co/image/ab67616d00001e02dc0719</a>…
</td>
<td>
Milk &amp; Honey
</td>
<td>
Crowder
</td>
<td>
2021
</td>
<td>
226633
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/6i"
class="uri">https://open.spotify.com/track/6i</a>…
</td>
<td>
50
</td>
<td>
0.500
</td>
<td>
…
</td>
<td>
0.0453
</td>
<td>
0.000000
</td>
<td>
0.3220
</td>
<td>
0.413
</td>
<td>
84.003
</td>
<td>
0
</td>
<td>
4
</td>
<td>
[Verse 1]’m headed to a place where the riv…
</td>
<td>
[headed, place, river, flow, headed, place, st…
</td>
<td>
144
</td>
</tr>
<tr>
<th>
4059
</th>
<td>
4059
</td>
<td>
Godsend
</td>
<td>
<a href="https://i.scdn.co/image/ab67616d00001e02f44f1c"
class="uri">https://i.scdn.co/image/ab67616d00001e02f44f1c</a>…
</td>
<td>
Godsend
</td>
<td>
Riley Clemmons
</td>
<td>
2021
</td>
<td>
251746
</td>
<td>
{‘spotify’: ’<a href="https://open.spotify.com/track/2S"
class="uri">https://open.spotify.com/track/2S</a>…
</td>
<td>
50
</td>
<td>
0.517
</td>
<td>
…
</td>
<td>
0.5980
</td>
<td>
0.000000
</td>
<td>
0.1400
</td>
<td>
0.287
</td>
<td>
75.955
</td>
<td>
0
</td>
<td>
4
</td>
<td>
[Verse 1]had added it uphad made all m…
</td>
<td>
[added, plan, road, paved, turned, dust, just,…
</td>
<td>
174
</td>
</tr>
</tbody>
</table>
<p>
3200 rows × 23 columns
</p>
</div>
<div class="sourceCode" id="cb108"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># enclose lyric in quotes</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>df_final[<span class="st">&#39;lyrics&#39;</span>] <span class="op">=</span> df_final[<span class="st">&#39;lyrics&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">&#39;&quot;&#39;</span><span class="op">+</span>x<span class="op">+</span><span class="st">&#39;&quot;&#39;</span>)</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get medium sized album image</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>df_final[<span class="st">&#39;image_url&#39;</span>] <span class="op">=</span> df_final[<span class="st">&#39;external_urls&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x:<span class="op">\</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    df3.loc[df3[<span class="st">&#39;external_urls&#39;</span>]<span class="op">==</span>x,<span class="st">&#39;album&#39;</span>].iloc[<span class="dv">0</span>][<span class="st">&#39;images&#39;</span>][<span class="dv">1</span>][<span class="st">&#39;url&#39;</span>])</span></code></pre></div>
<div class="sourceCode" id="cb109"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># export as csv</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>ls_col <span class="op">=</span> [<span class="st">&#39;index&#39;</span>,<span class="st">&#39;name&#39;</span>, <span class="st">&#39;artists_name&#39;</span>, <span class="st">&#39;image_url&#39;</span>, <span class="st">&#39;duration_ms&#39;</span>, <span class="st">&#39;release_year&#39;</span>, <span class="st">&#39;popularity&#39;</span>, <span class="st">&#39;danceability&#39;</span>,</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;energy&#39;</span>, <span class="st">&#39;loudness&#39;</span>, <span class="st">&#39;speechiness&#39;</span>, <span class="st">&#39;acousticness&#39;</span>, <span class="st">&#39;instrumentalness&#39;</span>,</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;liveness&#39;</span>, <span class="st">&#39;valence&#39;</span>, <span class="st">&#39;tempo&#39;</span>, <span class="st">&#39;key&#39;</span>, <span class="st">&#39;time_signature&#39;</span>, <span class="st">&#39;lyrics&#39;</span>, <span class="st">&#39;length_tokens&#39;</span>]</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>df_final[ls_col].to_csv(<span class="st">&#39;top100.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># token counts table</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>dfg <span class="op">=</span> df_final[[<span class="st">&#39;index&#39;</span>,<span class="st">&#39;name&#39;</span>,<span class="st">&#39;artists_name&#39;</span>,<span class="st">&#39;tokens&#39;</span>,<span class="st">&#39;release_year&#39;</span>]].explode(<span class="st">&#39;tokens&#39;</span>).<span class="op">\</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>groupby([<span class="st">&#39;index&#39;</span>,<span class="st">&#39;name&#39;</span>,<span class="st">&#39;artists_name&#39;</span>,<span class="st">&#39;release_year&#39;</span>,<span class="st">&#39;tokens&#39;</span>]).agg(count <span class="op">=</span> (<span class="st">&#39;tokens&#39;</span>,<span class="st">&#39;count&#39;</span>)).reset_index()</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># export to csv</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>dfg.to_csv(<span class="st">&#39;top100_counts.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<h3 id="tableau-dashboard">Tableau dashboard</h3>
<p>Click <a
href="https://public.tableau.com/app/profile/kevin.gunawan.albindo/viz/ChristianSongs/Dashboard1?publish=yes">here</a>
for exploration of track features in Tableau.</p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=It%27s%20all%20about%20love&amp;url=https%3A%2F%2Fkgalbindo.netlify.app%2Fposts%2F2022-01-26-its-all-about-love%2F">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fkgalbindo.netlify.app%2Fposts%2F2022-01-26-its-all-about-love%2F&amp;title=It%27s%20all%20about%20love">
        <i class="fab fa-linkedin"></i>
      </a>
    </span>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/kgalbindo/blog/issues/new">create an issue</a> on the source repository.</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Albindo (2022, Jan. 26). KG's Learning Blog: It's all about love. Retrieved from https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{albindo2022it's,
  author = {Albindo, Kevin Gunawan},
  title = {KG's Learning Blog: It's all about love},
  url = {https://kgalbindo.netlify.app/posts/2022-01-26-its-all-about-love/},
  year = {2022}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
